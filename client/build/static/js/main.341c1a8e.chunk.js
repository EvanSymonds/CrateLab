(this.webpackJsonpcratelabs=this.webpackJsonpcratelabs||[]).push([[0],{297:function(e,t,a){e.exports=a(471)},303:function(e,t,a){},328:function(e,t){},330:function(e,t){},368:function(e,t){},369:function(e,t){},448:function(e,t){},471:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(18),i=a.n(o),l=a(20),c=a.n(l),s=a(36),u=a(285),d=a(75),m=a(52),p=(a(303),a(8)),f=a.n(p),g=a(33),h=function(e){return{type:"THEME_SELECTED",payload:e}},b=function(e){return{type:"CHANGE_SETTINGS_AUTH",payload:e}},E=function(e){return{type:"EDIT_FILES_AUTH",payload:e}},v=a(530),y=a(280),j=a(566),w=a(142),x=a(141),O=a(143),S=Object(y.a)({palette:{type:"light",primary:{main:w.a[600],contrastText:"#fff"},secondary:{dark:x.a[500],main:x.a[400],light:x.a[200],menuGradient:"linear-gradient(to right, #eeeeee 40%, #e0e0e0 70%)",contrastText:"#000"},background:{default:"#fff"}},typography:{button:{fontWeight:"500",textTransform:"none"}},spacing:4}),k=Object(y.a)({palette:{type:"dark",primary:{main:O.a[300]},secondary:{dark:x.a[300],main:x.a[500],light:x.a[700],menuGradient:"linear-gradient(to right, #616161 40%, #545454 70%)",contrastText:"#fff"},background:{default:"#424242"}},typography:{button:{fontWeight:"500",textTransform:"none"}},spacing:4});k=Object(j.a)(k),S=Object(j.a)(S);var _=a(3),C=a(506),N=function(e){var t=Object(n.useState)(0),a=Object(_.a)(t,2),o=(a[0],a[1]);Object(C.a)((function(e){return{root:{},slidoverRight:{width:1e3,height:600,borderTopLeftRadius:50,borderBottomLeftRadius:50},slidoverLeft:{width:1e3,height:800,borderTopRightRadius:50,borderBottomRightRadius:50}}}))();Object(n.useEffect)((function(){return i(),window.addEventListener("scroll",i),function(){return window.removeEventListener("scroll",i)}}),[]);var i=function(){o(document.body.scrollTop||document.documentElement.scrollTop)};return r.a.createElement("div",null)},T=a(528),I=a(529),D=a(184),L=a(508),R=a(509),z=a(510),F=a(511),A=a(512),P=a(513),B=a(514),W=a(515),M=a(516),U=a(517),Y=a(518),X=a(519),q=a(520),J=a(521),V=a(522),G=a(523),H=a(524),Z=a(525),$=a(526),K=a(527),Q=function(e,t){switch(e){case"CloudUpload":return r.a.createElement(L.a,{fontSize:t});case"Delete":return r.a.createElement(R.a,{fontSize:t});case"AttachFile":return r.a.createElement(z.a,{fontSize:t});case"GetApp":return r.a.createElement(F.a,{fontSize:t});case"More":return r.a.createElement(A.a,{fontSize:t});case"Lock":return r.a.createElement(P.a,{fontSize:t});case"AccountCircle":return r.a.createElement(B.a,{fontSize:t});case"Menu":return r.a.createElement(W.a,{fontSize:t});case"Settings":return r.a.createElement(M.a,{fontSize:t});case"Edit":return r.a.createElement(U.a,{fontSize:t});case"ArrowDropUp":return r.a.createElement(Y.a,{fontSize:t});case"ArrowDropDown":return r.a.createElement(X.a,{fontSize:t});case"ArrowLeft":return r.a.createElement(q.a,{fontSize:t});case"ArrowRight":return r.a.createElement(J.a,{fontSize:t});case"Folder":return r.a.createElement(V.a,{fontSize:t});case"Fill":return r.a.createElement(G.a,{fontSize:t});case"TextColor":return r.a.createElement(H.a,{fontSize:t});case"Add":return r.a.createElement(Z.a,{fontSize:t});case"Close":return r.a.createElement($.a,{fontSize:t});case"Done":return r.a.createElement(K.a,{fontSize:t})}},ee=function(e){var t=function(){return e.color?"primary"===e.backgroundColor?a.backgroundPrimary:a.useOther:a.root},a=Object(D.a)((function(e){return{root:{color:e.palette.secondary.main,"&$disabled":{color:e.palette.secondary.light}},backgroundPrimary:{backgroundColor:e.palette.primary},useOther:{},disabled:{}}}))(),n={normal:{button:r.a.createElement(T.a,{classes:{root:t(),disabled:a.disabled},disabled:e.disabled,onClick:e.onClick,variant:e.variant,size:e.size,color:e.color,component:e.component},e.buttonText)},normalWithIcon:{button:r.a.createElement(T.a,{classes:{root:t(),disabled:a.disabled},disabled:e.disabled,onClick:e.onClick,startIcon:Q(e.icon),variant:e.variant,size:e.size,color:e.color,component:e.component,fill:e.fill},e.buttonText)},icon:{button:r.a.createElement(I.a,{classes:{root:t(),disabled:a.disabled},disabled:e.disabled,onClick:e.onClick,component:e.component,color:e.color,fill:e.fill},Q(e.icon,e.size))}}[e.type];return r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},n.button)},te=a(183),ae=function(e){var t="/static/images/logo.png",a=300,n=300,o=Object(C.a)((function(e){return{button:{position:"relative",height:n/3,width:a/3},image:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundSize:"cover",backgroundPosition:"center"}}}))(),i=Object(d.g)();return r.a.createElement("div",null,r.a.createElement(te.a,{disableRipple:!0,className:o.button,onClick:function(){return i.push("/")}},r.a.createElement("span",{className:o.image,style:{backgroundImage:"url(".concat(t,")")}})))},ne=a(560),re=a(537),oe=a(475),ie=a(559),le=a(478),ce=a(533),se=a(531),ue=a(27),de=a(24),me=a(39),pe=a(281),fe=function(e){var t=Object(D.a)((function(e){return{root:{color:e.palette.secondary.dark},disabled:{color:e.palette.secondary.light},active:{borderColor:e.palette.primary}}}))(),a=Object(me.a)(),o=function(){return!1===e.disabled?t.root:t.disabled},i=Object(n.useCallback)((function(t){e.onDrop(t)})),l={display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:150,height:150,borderRadius:75,borderWidth:2,borderStyle:"dashed",margin:"30px"},c={borderColor:a.palette.primary.main},s=Object(pe.a)({onDrop:i}),u=s.getRootProps,d=s.isDragActive,m=Object(n.useMemo)((function(){return Object(ue.a)({},l,{},d?c:{})}),[d]);return r.a.createElement("div",Object.assign({},u({style:m}),{className:o()}),r.a.createElement("div",null,r.a.createElement("input",{disabled:e.disabled,onChange:function(t){e.onDrop(t.target.files)},id:"icon-button-file",type:"file",style:{display:"none"}}),r.a.createElement("label",{htmlFor:"icon-button-file"},r.a.createElement(v.a,{theme:a},r.a.createElement(ee,{disabled:e.disabled,type:"icon",icon:"GetApp",size:"large","aria-label":"upload picture",component:"span"})))),r.a.createElement("div",{className:o()},"Upload files"))},ge=a(532),he=function(e){var t=Object(D.a)((function(e){return{root:{backgroundColor:e.palette.primary.main}}}))();return r.a.createElement("div",{"test-data":"component-progressBar"},r.a.createElement("div",{style:{height:5,width:"100%",borderRadius:"5px"}},r.a.createElement("div",{className:t.root,style:{height:"100%",width:e.progress+"%",borderRadius:"5px",margin:0}})))},be=a(272),Ee=a.n(be),ve=function(e){var t=Object(n.useState)([]),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),u=Object(_.a)(l,2),d=u[0],m=(u[1],Object(n.useState)({})),p=Object(_.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)([]),E=Object(_.a)(b,2),v=E[0],y=E[1],j=Object(n.useState)(!0),w=Object(_.a)(j,2),x=w[0],O=w[1],S=Object(n.useState)(""),k=Object(_.a)(S,2),C=k[0],N=k[1],T=Object(D.a)((function(e){return{root:{position:"absolute",top:"50%",left:"50%",marginTop:"-120px",marginLeft:"-300px",borderRadius:110,width:600},errorMessage:{color:e.palette.primary.main}}}))(),I=function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y(o.map((function(){return!1}))),t.next=3,L(e.credential);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),L=function(){var t=Object(s.a)(c.a.mark((function t(a){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return O(!1),t.abrupt("return",new Promise(function(){var t=Object(s.a)(c.a.mark((function t(n,r){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o.forEach(function(){var t=Object(s.a)(c.a.mark((function t(i,l){var u,d,m;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return y([].concat(Object(de.a)(v),[!1])),u={onUploadProgress:function(){var t=Object(s.a)(c.a.mark((function t(a){var n,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Math.round(100*a.loaded/a.total),(r=Object(ue.a)({},g))[l]={state:"pending",percentage:n},100===n&&void 0!==e.addSkeleton&&e.addSkeleton(o.length),t.next=6,h((function(e){return Object(ue.a)({},e,{},r)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(d=new FormData).append("file",i),d.append(e.credentialType,a),void 0!==e.folder_id&&d.append("folder_id",e.folder_id),m="/api"+e.endpoint,t.next=9,f.a.post(m,d,u).then((function(t,a){if(a)r("Error: ",a),O(!0);else if(200===t.status){var o=v;o[l]=!0,y(o);v.length>0&&!0===v.every((function(e){return!0===e}))&&(e.updateParent(),e.onFileUploaded(),n())}}));case 9:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(ge.a,{raised:!0,className:T.root},r.a.createElement(ce.a,{container:!0,direction:"row",alignItems:"center"},r.a.createElement(ce.a,{item:!0},r.a.createElement(fe,{onDrop:function(t){var a=Object.keys(t).map((function(e){return e}));o.length+t.length<=e.maxFiles?(N(""),a.forEach((function(e,a){console.log(t[a]),i((function(e){return[].concat(Object(de.a)(e),[t[a]])}))}))):N("Maximum of ".concat(e.maxFiles," file").concat(e.maxFiles>1?"s":""))},disabled:d})),r.a.createElement(ce.a,{item:!0,style:{width:"250px",marginBottom:"30px",marginTop:"20px"}},o.map((function(e,t){return function(e,t,a,n){return r.a.createElement("div",{key:a},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",{style:{float:"left",width:"250px"}},r.a.createElement(se.a,{noWrap:!0},e),r.a.createElement("div",{style:{width:"250px"}},r.a.createElement(he,{progress:t}))),n?r.a.createElement(Ee.a,{color:"secondary"}):null))}(e.name,g[t]?g[t].percentage:0,t,!!g[t]&&100===g[t].percentage)})),r.a.createElement("div",{className:T.errorMessage},C)),r.a.createElement(ce.a,{item:!0,style:{position:"relative",left:"50px"}},r.a.createElement(ee,{size:"large",type:"icon",icon:"CloudUpload",color:"primary",onClick:I,disabled:!x}))))},ye=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(D.a)((function(t){return{root:{width:e.width,height:e.height,borderRadius:"circle"===e.shape?e.width/2:0,overflow:"hidden",cursor:"edit"===e.mode?"pointer":"auto",opacity:"edit"===e.mode?.8:1,backgroundColor:t.palette.background.default},edit:{width:e.width,height:e.height/3,backgroundColor:t.palette.secondary.main,opacity:.8,marginTop:-(e.height/3+4),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.height/5}}}))();Object(n.useEffect)((function(){f.a.get("/api/profile_pictures/user/"+e.user_id).then((function(e){var t=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(e.data.data.data);i(("data:image/png;base64,"+t).toString())})).catch((function(e){i(""),console.log(e)}))}),[e.user_id]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:d.root,onClick:function(){return"edit"===e.mode?u(!0):null}},""===o?r.a.createElement(B.a,{className:d.root,color:"secondary"}):r.a.createElement("img",{src:o,className:d.root}),"edit"===e.mode?r.a.createElement("div",{className:d.edit},r.a.createElement(U.a,{fontSize:"inherit"})):null),r.a.createElement(ie.a,{disableScrollLock:!0,open:s,onClose:function(){return u(!1)}},r.a.createElement("div",null,r.a.createElement(ve,{updateParent:function(){f.a.get("/api/profile_pictures/user/"+e.user_id).then((function(e){var t=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(e.data.data.data);i(("data:image/png;base64,"+t).toString())})).catch((function(e){i(""),console.log(e)}))},credentialType:"user_id",credential:e.credential,maxFiles:1,endpoint:"/profile_pictures"}))))},je=a(534),we=a(535),xe=a(536),Oe=a(38),Se=function(e){var t=Object(n.useState)(window.innerWidth>1e3),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],m=[{name:"Projects",icon:r.a.createElement(je.a,null)},{name:"Settings",icon:r.a.createElement(we.a,null)},{name:"Support",icon:r.a.createElement(xe.a,null)}],p=Object(C.a)((function(e){return{root:{width:250,display:"inline"},itemText:{fontSize:20,marginLeft:10},menuItem:{backgroundColor:e.palette.secondary.light,height:50,paddingLeft:20,display:"flex",alignItems:"center",cursor:"pointer","&:hover":{background:e.palette.secondary.menuGradient}},menuItemSelected:{background:e.palette.secondary.menuGradient,height:50,paddingLeft:20,display:"flex",alignItems:"center",cursor:"pointer","&:hover":{background:e.palette.secondary.menuGradient}},drawerPaper:{width:250,height:"100%",background:e.palette.secondary.light},menuButton:{display:"inline",width:48},userZone:{width:250,height:100},avatar:{width:60,height:60,marginLeft:15,marginRight:10},profilePicture:{width:60,height:60},username:{display:"flex",flexDirection:"column",justifyContent:"center",width:116}}}))(),f=Object(d.g)(),g=function(){window.innerWidth<=1e3?(i(!1),e.onResize()):window.innerWidth>1e3&&(i(!0),e.onResize())};Object(n.useEffect)((function(){return window.addEventListener("resize",g),function(){window.removeEventListener("resize",g)}}),[]);var h=function(){u(!0)},b=function(){u(!1)},E=function(){window.localStorage.removeItem("authToken"),f.push("/")},v=function(){if(null!==window.localStorage.getItem("authToken"))return r.a.createElement("div",{style:{marginTop:10}},r.a.createElement(ee,{type:"normal",variant:"outlined",buttonText:"Sign out",onClick:E,color:"primary"}))},y=function(){if(window.localStorage.getItem("authToken")){var e=window.localStorage.getItem("authToken"),t=Oe.decode(JSON.parse(e)),a=t.name.substr(0,t.name.length-5),n=t.name.substr(t.name.length-5);return r.a.createElement("div",{style:{display:"flex",alignItems:"center",height:100}},r.a.createElement(le.a,{className:p.avatar},r.a.createElement(ye,{user_id:t.user_id,width:60,height:60})),r.a.createElement("div",{className:p.username},r.a.createElement(se.a,{noWrap:!0,style:{display:"block",fontWeight:"bold",fontSize:14},variant:"h6"},a),r.a.createElement(se.a,{color:"primary",style:{display:"block"},variant:"caption"},n)),r.a.createElement(ee,{type:"icon",icon:"Settings",onClick:function(){return f.push("/settings")},color:"primary"}))}return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",height:"100%"}},r.a.createElement("div",{style:{margin:10}},r.a.createElement(ee,{type:"normal",variant:"outlined",buttonText:"Sign up",color:"primary",onClick:function(){return f.push("/signup")}})),r.a.createElement("div",{style:{margin:10}},r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Login",color:"primary",onClick:function(){return f.push("/login")}})))},j=function(e){var t=window.location.pathname.split("/");return e.toLowerCase()===t[1]?p.menuItemSelected:p.menuItem},w=function(){var e=m.map((function(e,t){return r.a.createElement(oe.a,{square:!0,key:t,className:j(e.name),elevation:0,onClick:function(){return f.push("/".concat(e.name.toLowerCase()))}},e.icon,r.a.createElement(se.a,{variant:"body2",className:p.itemText},e.name))}));return r.a.createElement(ce.a,{container:!0,direction:"column"},r.a.createElement(ce.a,{item:!0,style:{marginBottom:15,marginTop:15,display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(ae,null)),r.a.createElement(ce.a,{item:!0},e))};return r.a.createElement("div",{style:{width:48,display:"inline"}},o?r.a.createElement(ne.a,{className:p.root,variant:"permanent",anchor:"left"},r.a.createElement(oe.a,{square:!0,className:p.drawerPaper},r.a.createElement("div",{className:p.userZone},y(),r.a.createElement(re.a,{variant:"middle"})),r.a.createElement("div",null,w()),r.a.createElement("div",{style:{position:"absolute",width:250,bottom:10,display:"flex",justifyContent:"center"}},v()))):r.a.createElement("div",{style:{width:48,position:"fixed"}},r.a.createElement(ee,{className:p.menuButton,type:"icon",icon:"Menu",color:"primary",onClick:h}),r.a.createElement(ie.a,{open:s,disableScrollLock:!0,onClose:b},r.a.createElement(ne.a,{className:p.root,variant:"permanent",anchor:"left"},r.a.createElement(oe.a,{square:!0,className:p.drawerPaper},r.a.createElement("div",{className:p.userZone},y(),r.a.createElement(re.a,{variant:"middle"}),w())),r.a.createElement("div",{style:{position:"absolute",width:250,bottom:10,display:"flex",justifyContent:"center"}},v())))))},ke=a(567),_e=a(53),Ce=a.n(_e),Ne=a(38),Te=function(e){var t=Object(n.useState)(window.innerWidth>1e3),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1];Object(n.useEffect)((function(){Ce()("http://localhost:3001").on("PROJECT_INVITE",(function(e){if(window.localStorage.getItem("authToken")){var t=window.localStorage.getItem("authToken"),a=Ne.decode(JSON.parse(t));parseInt(a.user_id)===e&&u(!0)}}))}),[]);var m=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:o?250:0},background:{position:"absolute",top:0,right:0,width:"100%",height:"calc(100% + 10px)"},notification:{backgroundColor:e.palette.secondary.light,display:"flex",flexDirection:"row",alignItems:"center",padding:"0px 5px 0px 10px"}}}))();Object(d.g)();return r.a.createElement(oe.a,{square:!0,className:m.background},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?i(!1):window.innerWidth>1e3&&i(!0)}}),r.a.createElement("div",{className:m.page},r.a.createElement(N,null)),r.a.createElement(ke.a,{className:m.snackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:s,autoHideDuration:3e3,onClose:function(){return u(!1)}},r.a.createElement(oe.a,{className:m.notification},r.a.createElement("div",{style:{fontSize:15,marginRight:15}},"New project invite!"),r.a.createElement(ee,{type:"icon",icon:"Close",onClick:function(){return u(!1)}}))))},Ie=a(563),De=a(540),Le=a(541),Re=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(""),u=Object(_.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(!1),g=Object(_.a)(p,2),h=g[0],b=g[1],E=Object(n.useState)(!1),v=Object(_.a)(E,2),y=v[0],j=v[1],w=Object(C.a)((function(e){return{root:{width:400,padding:40,background:e.palette.secondary.light},inputPaper:{padding:"2px 4px",display:"flex",alignItems:"center",width:340,height:50},inputIcons:{},inputDivider:{margin:4,height:40},input:{marginLeft:5,width:240},iconButton:{padding:10},divider:{height:28,margin:4}}}))(),x=function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),(n=new FormData).append("credential",o),n.append("password",d),"/api/auth",t.prev=5,t.next=8,f.a.post("/api/auth",n).then((function(t){if(200===t.status){var a=JSON.stringify(t.headers["x-auth-token"]);e.onLogin(a)}}));case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(5),"401"===t.t0.message.substr(t.t0.message.length-3)&&j(!0);case 13:case"end":return t.stop()}}),t,null,[[5,10]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(oe.a,{component:"form",onSubmit:x,className:w.root},r.a.createElement(ce.a,{direction:"row",justify:"center",container:!0,spacing:1},r.a.createElement(ce.a,{item:!0,xs:!0,style:{margin:"10px"}},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(oe.a,{square:!0,className:w.inputPaper},r.a.createElement(B.a,{color:"secondary",fontSize:"large",className:w.inputIcons}),r.a.createElement(re.a,{orientation:"vertical",className:w.inputDivider}),r.a.createElement(Ie.a,{required:!0,onChange:function(e){return i(e.target.value)},placeholder:"Username or email",className:w.input})))),r.a.createElement(ce.a,{item:!0,xs:!0,style:{margin:"10px"}},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(oe.a,{square:!0,className:w.inputPaper},r.a.createElement(P.a,{color:"secondary",fontSize:"large",className:w.inputIcons}),r.a.createElement(re.a,{orientation:"vertical",className:w.inputDivider}),r.a.createElement(Ie.a,{required:!0,onChange:function(e){return m(e.target.value)},type:h?"text":"password",placeholder:"Password",className:w.input}),r.a.createElement(I.a,{"aria-label":"toggle password visibility",onClick:function(){b(!h)},onMouseDown:function(e){e.preventDefault()},edge:"end"},h?r.a.createElement(De.a,null):r.a.createElement(Le.a,null))))),function(){if(!0===y)return r.a.createElement(se.a,{color:"primary"},"Username or password incorrect")}(),r.a.createElement(ce.a,{item:!0,xs:6,align:"center"},r.a.createElement("div",{style:{marginTop:"20px",display:"inline-block"}},r.a.createElement(T.a,{onClick:e.onSignup,variant:"text",color:"primary"},"Sign up"))),r.a.createElement(ce.a,{item:!0,xs:6,align:"center"},r.a.createElement("div",{style:{marginTop:"20px",display:"inline-block"}},r.a.createElement(T.a,{type:"submit",variant:"outlined",color:"primary"},"Login")))))},ze=function(e){var t=Object(n.useState)(window.innerWidth>1e3),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:o?250:0,display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},background:{position:"absolute",top:0,right:0,width:"100%",height:"100%"}}}))(),c=Object(d.g)();return r.a.createElement(oe.a,{square:!0,className:l.background},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?i(!1):window.innerWidth>1e3&&i(!0)}}),r.a.createElement("div",{className:l.page},r.a.createElement(Re,{onLogin:function(e){window.localStorage.setItem("authToken",e),c.push("/"),window.location.reload(!1)},onSignup:function(){c.push("/signup")}})))},Fe=a(542),Ae=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(""),u=Object(_.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(""),g=Object(_.a)(p,2),h=g[0],b=g[1],E=Object(n.useState)(""),v=Object(_.a)(E,2),y=v[0],j=v[1],w=Object(n.useState)(!1),x=Object(_.a)(w,2),O=x[0],S=x[1],k=Object(n.useState)(""),N=Object(_.a)(k,2),D=N[0],L=N[1],R=Object(C.a)((function(e){return{root:{width:400,padding:40,margin:50,background:e.palette.secondary.light},inputPaper:{padding:"2px 4px",display:"flex",alignItems:"center",width:340,height:50},inputIcons:{},inputDivider:{margin:4,height:40},input:{marginLeft:5,width:240},iconButton:{padding:10},divider:{height:28,margin:4}}}))(),z=function(){S(!O)},F=function(e){e.preventDefault()},A=function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),h!==y){t.next=17;break}return(n=new FormData).append("username",o),n.append("email",d),n.append("password",h),"/api/auth/signup",t.prev=7,t.next=10,f.a.post("/api/auth/signup",n).then((function(t){if(200===t.status){var a=JSON.stringify(t.headers["x-auth-token"]);e.onSignup(a)}}));case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(7),L(t.t0.response.data.detail);case 15:t.next=18;break;case 17:L("Passwords must match");case 18:case"end":return t.stop()}}),t,null,[[7,12]])})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement(oe.a,{component:"form",onSubmit:A,className:R.root},r.a.createElement(ce.a,{direction:"row",justify:"center",container:!0,spacing:1},r.a.createElement(ce.a,{item:!0,xs:!0,style:{margin:"10px"}},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(oe.a,{square:!0,className:R.inputPaper},r.a.createElement(B.a,{color:"secondary",fontSize:"large",className:R.inputIcons}),r.a.createElement(re.a,{orientation:"vertical",className:R.inputDivider}),r.a.createElement(Ie.a,{required:!0,onChange:function(e){return i(e.target.value)},placeholder:"Username",className:R.input})))),r.a.createElement(ce.a,{item:!0,xs:!0,style:{margin:"10px"}},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(oe.a,{square:!0,className:R.inputPaper},r.a.createElement(Fe.a,{color:"secondary",fontSize:"large",className:R.inputIcons}),r.a.createElement(re.a,{orientation:"vertical",className:R.inputDivider}),r.a.createElement(Ie.a,{required:!0,onChange:function(e){return m(e.target.value)},placeholder:"Email",className:R.input})))),r.a.createElement(ce.a,{item:!0,xs:!0,style:{margin:"10px"}},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(oe.a,{square:!0,className:R.inputPaper},r.a.createElement(P.a,{color:"secondary",fontSize:"large",className:R.inputIcons}),r.a.createElement(re.a,{orientation:"vertical",className:R.inputDivider}),r.a.createElement(Ie.a,{required:!0,onChange:function(e){return b(e.target.value)},type:O?"text":"password",placeholder:"Password",className:R.input}),r.a.createElement(I.a,{"aria-label":"toggle password visibility",onClick:z,onMouseDown:F,edge:"end"},O?r.a.createElement(De.a,null):r.a.createElement(Le.a,null))))),r.a.createElement(ce.a,{item:!0,xs:!0,style:{margin:"10px"}},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center"},r.a.createElement(oe.a,{square:!0,className:R.inputPaper},r.a.createElement(P.a,{color:"secondary",fontSize:"large",className:R.inputIcons}),r.a.createElement(re.a,{orientation:"vertical",className:R.inputDivider}),r.a.createElement(Ie.a,{required:!0,onChange:function(e){return j(e.target.value)},type:O?"text":"password",placeholder:"Confirm password",className:R.input}),r.a.createElement(I.a,{"aria-label":"toggle password visibility",onClick:z,onMouseDown:F,edge:"end"},O?r.a.createElement(De.a,null):r.a.createElement(Le.a,null))))),r.a.createElement(se.a,{color:"primary"},D),r.a.createElement(ce.a,{item:!0,xs:12,align:"center"},r.a.createElement("div",{style:{margin:"20px",display:"inline-block"}},r.a.createElement(T.a,{type:"submit",variant:"outlined",color:"primary"},"Create account")))))},Pe=function(e){var t=Object(n.useState)(window.innerWidth>1e3),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:o?250:0,display:"flex",height:"100%",justifyContent:"center",alignItems:"center"},background:{position:"absolute",top:0,right:0,width:"100%",height:"100%"}}}))(),c=Object(d.g)();return r.a.createElement(oe.a,{square:!0,className:l.background},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?i(!1):window.innerWidth>1e3&&i(!0)}}),r.a.createElement("div",{className:l.page},r.a.createElement(Ae,{onSignup:function(e){window.localStorage.setItem("authToken",e),c.push("/")}})))},Be=a(41),We=a(4),Me=a(568),Ue=a(547),Ye=a(282),Xe=a(283),qe=a(548),Je=a(544),Ve=a(545),Ge=a(546),He=Object(g.b)((function(e){return{selectedTheme:e.selectedTheme}}))((function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){-1!==e.project_id&&f.a.get("/api/thumbnails/"+e.project_id).then((function(e){var t=function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(e.data.data.data);i(("data:image/png;base64,"+t).toString())})).catch((function(e){"No thumbnail"===e.response.data&&i(null)}))}),[]);var l=Object(C.a)((function(e){var t,a;return{root:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:null,marginLeft:50,marginRight:"auto",marginBottom:50,height:350,width:350,borderRadius:e.spacing(4),overflow:"visible",display:"flex",flexDirection:"column",alignItems:"center",cursor:"pointer"},mediaContainer:{width:"88%",display:"flex",justifyContent:"center",alignItems:"center",marginLeft:"auto",marginRight:"auto",height:200,marginTop:e.spacing(-3),borderRadius:e.spacing(4),boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},media:(t={width:"100%",marginLeft:"auto",marginRight:"auto",height:200,borderRadius:e.spacing(4)},Object(Be.a)(t,e.breakpoints.up("md"),{width:"100%"}),Object(Be.a)(t,"&:after",{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:e.spacing(2),opacity:.5}),t),textBody:{color:e.palette.primary.main,fontSize:16},avatarGroup:{"& .MuiAvatar-root":{width:35,height:35}},placeholder:(a={display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.secondary.main,width:"100%",marginLeft:"auto",marginRight:"auto",marginTop:"auto",marginBotton:"auto",height:200,paddingBottom:"60%",borderRadius:e.spacing(4)},Object(Be.a)(a,e.breakpoints.up("md"),{width:"100%"}),Object(Be.a)(a,"&:after",{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:e.spacing(2),opacity:.5}),a),addIcon:{fontSize:120,color:e.palette.secondary.dark},createText:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:50,fontSize:25,fontWeight:"bold",color:e.palette.secondary.dark}}})),c=l(),s=Object(Ye.a)(),u=Object(Xe.a)();l();return r.a.createElement("div",null,r.a.createElement(ge.a,{className:Object(We.a)(c.root,"darkModeTheme"===e.selectedTheme.name?u.root:s.root),onClick:"normal"===e.type?e.onClick:null},r.a.createElement(ge.a,{className:c.mediaContainer},null===o?r.a.createElement(oe.a,{className:c.placeholder},r.a.createElement(Ve.a,{style:{fontSize:70}})):-1===e.project_id?r.a.createElement(oe.a,{className:c.placeholder},r.a.createElement(Ge.a,{className:c.addIcon})):r.a.createElement(Ue.a,{component:"img",image:o,className:c.thumbnail})),-1!==e.project_id?r.a.createElement("div",{style:{textAlign:"left",marginTop:20,width:"85%"}},r.a.createElement(se.a,{noWrap:!0,variant:"h5"},r.a.createElement(Me.a,{fontFamily:"Arial",fontWeight:"fontWeightBold"},e.project_name)),r.a.createElement("div",{style:{marginTop:5}},r.a.createElement(se.a,{className:c.textBody,noWrap:!0,variant:"body2"},"invite"===e.type?"Invite":"".concat(e.members," ").concat(e.members>1?"members":"member")))):r.a.createElement("div",{className:c.createText},"Create project"),-1!==e.project_id?r.a.createElement(ce.a,{container:!0,style:{marginTop:15,marginLeft:60}},r.a.createElement(ce.a,{item:!0,xs:9},"invite"===e.type?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",{style:{marginRight:10}},r.a.createElement(ee,{type:"icon",icon:"Done",color:"primary",onClick:function(){var t=new FormData;t.append("project_id",e.project_id),t.append("role_id",e.role_id),f.a.post("/api/roles/invite/accept",t).then((function(t){e.rerender()})).catch((function(e){console.log(e)}))}})),r.a.createElement(ee,{type:"icon",icon:"Close",color:"primary",onClick:function(){var t=new FormData;t.append("project_id",e.project_id),t.append("role_id",e.role_id),f.a.post("/api/roles/invite/decline",t).then((function(t){e.rerender()})).catch((function(e){console.log(e)}))}})):r.a.createElement(qe.a,{max:4,width:"35",className:c.avatarGroup},e.memberList.map((function(e,t){if("-1"!==e.user_id)return r.a.createElement(le.a,{key:t},r.a.createElement(ye,{user_id:e.user_id,width:35,height:35}))})))),r.a.createElement(ce.a,{item:!0,xs:2},!0===e.isPublic?r.a.createElement(Je.a,{color:"primary",fontSize:"large"}):r.a.createElement(P.a,{color:"primary",fontSize:"large"}))):null))})),Ze=a(549),$e=a(38),Ke=function(){var e=Object(n.useState)(window.innerWidth>1e3),t=Object(_.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)([]),l=Object(_.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)([]),m=Object(_.a)(u,2),p=m[0],g=m[1],h=Object(n.useState)(!1),b=Object(_.a)(h,2),E=b[0],v=b[1],y=Object(n.useState)(!0),j=Object(_.a)(y,2),w=j[0],x=j[1];Object(n.useEffect)((function(){k()}),[]),Object(n.useEffect)((function(){Ce()("http://localhost:3001").on("PROJECT_INVITE",(function(e){if(window.localStorage.getItem("authToken")){var t=window.localStorage.getItem("authToken"),a=$e.decode(JSON.parse(t));parseInt(a.user_id)===e&&(v(!0),k())}}))}),[]);var O=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:a?250:0,marginTop:48},background:{position:"absolute",top:0,right:0,width:"100%",height:"calc(100% + 10px)",overflow:"auto"},notification:{backgroundColor:e.palette.secondary.light,display:"flex",flexDirection:"row",alignItems:"center",padding:"0px 5px 0px 10px"}}}))(),S=Object(d.g)(),k=function(){g([]),s([]);var e=window.localStorage.getItem("authToken"),t=$e.decode(JSON.parse(e));f.a.get("/api/roles/user/"+t.user_id).then((function(e){var t=[];if(0===e.data.length)x(!1);else{e.data.forEach((function(e){"INVITED"===e.role_name&&f.a.get("/api/projects/"+e.project_id).then((function(a){g([].concat(t,[{project_id:a.data[0].project_id,project_name:a.data[0].project_name,isPublic:a.data[0].is_public,role_id:e.role_id}])),x(!1)})).catch((function(e){console.log(e)}))})),e=e.data.filter((function(e){return"INVITED"!==e.role_name}));var a=[];e.forEach((function(e){"-1"!==e.user_id&&f.a.get("/api/projects/"+e.project_id).then((function(e){f.a.get("/api/roles/project/"+e.data[0].project_id).then((function(t){x(!1);var n=t.data.filter((function(e){return"-1"!==e.user_id&&"INVITED"!==e.role_name}));a=[].concat(Object(de.a)(a),[{project_id:e.data[0].project_id,project_name:e.data[0].project_name,isPublic:e.data[0].is_public,members:n.length,memberList:n}]),s(a)}))}))}))}}))};return r.a.createElement(oe.a,{square:!0,elevation:0,className:O.background},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?o(!1):window.innerWidth>1e3&&o(!0)}}),r.a.createElement("div",{className:O.page},r.a.createElement(ce.a,{container:!0,style:{marginLeft:30,marginTop:20,width:"calc(100% - 50px)"}},r.a.createElement(ce.a,{item:!0},r.a.createElement(He,{project_id:-1,type:"normal",onClick:function(){x(!0);var e=window.localStorage.getItem("authToken"),t=$e.decode(JSON.parse(e));f.a.post("/api/projects/create/"+t.user_id).then((function(){s([]),k()})).catch((function(e){console.log(e)}))}})),w?[0,0,0].map((function(e,t){return r.a.createElement("div",{key:"Skeleton"+t,style:{marginLeft:50}},r.a.createElement(Ze.a,{variant:"rect",width:308,height:200,animation:"wave",style:{marginBottom:5}}),r.a.createElement(Ze.a,{variant:"text",width:180}),r.a.createElement(Ze.a,{variant:"text",width:180}),r.a.createElement(Ze.a,{variant:"circle",width:40,height:40}))})):r.a.createElement(r.a.Fragment,null,p.map((function(e,t){return r.a.createElement(He,{type:"invite",key:t,role_id:e.role_id,project_id:e.project_id,project_name:e.project_name,members:e.members,memberList:e.memberList,rerender:k,isPublic:e.isPublic,onClick:function(){return S.push(e.project_name+"/"+e.project_id)}})})),c.map((function(e,t){return r.a.createElement(ce.a,{item:!0,key:t},r.a.createElement(He,{type:"normal",key:t,project_id:e.project_id,project_name:e.project_name,members:e.members,memberList:e.memberList,isPublic:e.isPublic,onClick:function(){return S.push(e.project_name+"/"+e.project_id)}}))}))))),r.a.createElement(ke.a,{className:O.snackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:E,autoHideDuration:3e3,onClose:function(){return v(!1)}},r.a.createElement(oe.a,{className:O.notification},r.a.createElement("div",{style:{fontSize:15,marginRight:15}},"New project invite!"),r.a.createElement(ee,{type:"icon",icon:"Close",onClick:function(){return v(!1)}}))))},Qe=a(558),et=a(38),tt=Object(g.b)((function(e){return{selectedTheme:e.selectedTheme}}),{selectTheme:h})((function(e){var t=[{url:"/static/images/red-grey-icon.png",name:"redGreyTheme"},{url:"/static/images/dark-mode-icon.png",name:"darkModeTheme"}],a=function(t){var a={name:t.target.name,id:t.target.id};if(e.selectTheme(a),"undefined"!==window.localStorage.getItem("authToken")&&window.localStorage.getItem("authToken")){var n=window.localStorage.getItem("authToken"),r=et.decode(JSON.parse(n));f.a.post("/api/user_settings/"+r.user_id,{theme:a.name}).then((function(e,t){t&&console.log(t)}))}};return r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",{style:{fontSize:18,marginLeft:20}},"Site theme"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",width:240,marginLeft:"calc(100% - 500px)"}},t.map((function(t,n){return r.a.createElement("div",{key:n.toString(),style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",width:100,margin:10,marginTop:50}},r.a.createElement(oe.a,{elevation:5,square:!0,style:{width:100,height:68}},r.a.createElement("img",{src:t.url,id:n.toString(),name:t.name,onClick:a})),r.a.createElement(Qe.a,{checked:e.selectedTheme.id.toString()===n.toString(),id:n.toString(),onChange:a,name:t.name}))}))))})),at=a(556),nt=function(e){var t=Object(n.useState)(null),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)("view"),u=Object(_.a)(l,2),d=u[0],m=u[1],p=Object(n.useState)(!1),g=Object(_.a)(p,2),h=g[0],b=g[1],E=Object(n.useState)(!1),v=Object(_.a)(E,2),y=v[0],j=v[1],w=Object(D.a)((function(e){return{root:{width:450,height:170,display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:15,backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:e.palette.background.default,boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},container:{display:"flex",flexDirection:"column",justifyContent:"center",marginLeft:20},header:{textTransform:"uppercase",fontSize:15,fontWeight:"bold",color:e.palette.secondary.dark},usernameText:{marginBottom:10,fontSize:15,maxWidth:270,overflow:"hidden",textOverflow:"ellipsis"},emailText:{marginBottom:10,fontSize:15,width:270,overflow:"hidden",textOverflow:"ellipsis"},userNumbers:{fontSize:15,color:e.palette.primary.main,marginLeft:5},editButton:{marginLeft:"edit"===d?50:20},input:{marginBottom:5}}}))();Object(n.useEffect)((function(){f.a.get("/api/users/"+e.user.user_id).then((function(e){i(e.data[0])})).catch((function(e){console.log(e)}))}),[]);var x=function(e){i(Object(ue.a)({},o,{username:e.target.value}))},O=function(e){i(Object(ue.a)({},o,{email:e.target.value}))},S=function(){var t=Object(s.a)(c.a.mark((function t(a){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a.preventDefault(),(n=new FormData).append("username",o.username),n.append("email",o.email),f.a.post("/api/users/"+e.user.user_id,n).then(Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t,a){f.a.get("/api/users/"+e.user.user_id).then((function(e){i(e.data[0]),t()})).catch((function(e){console.log(e),a()}))})).then((function(){m("view")}));case 2:case"end":return t.stop()}}),t)})))).catch((function(e){console.log(e.response),"username"===e.response.data.details[0].path?b(e.response.data.details[0].message):j(e.response.data.details[0].message)}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return r.a.createElement("div",null,null!==o?r.a.createElement(ge.a,{className:w.root},r.a.createElement("div",{style:{marginRight:5}},r.a.createElement(ye,{user_id:parseInt(o.user_id),shape:"circle",width:75,height:75,mode:d,credential:e.user.user_id})),"view"===d?r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",{className:w.container},r.a.createElement("div",{className:w.header},"Username"),r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement("div",{className:w.usernameText},o.username.slice(0,o.username.length-5)),r.a.createElement("div",{className:w.userNumbers},o.username.slice(o.username.length-5,o.username.length))),r.a.createElement("div",{className:w.header},"Email"),r.a.createElement("div",{className:w.emailText},o.email)),r.a.createElement("div",{className:w.editButton},r.a.createElement(ee,{type:"icon",icon:"Edit",color:"primary",onClick:function(){m("edit"),i(Object(ue.a)({},o,{username:o.username.slice(0,o.username.length-5)}))}}))):r.a.createElement("form",{style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement("div",{className:w.container},r.a.createElement(at.a,{className:w.input,onChange:x,label:"Username",variant:"filled",color:"primary",value:o.username,helperText:!1===h?null:h}),r.a.createElement(at.a,{onChange:O,label:"Email",variant:"filled",color:"primary",value:o.email,helperText:!1===y?null:y})),r.a.createElement("div",{className:w.editButton},r.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary",onClick:S},"Save")))):null)},rt=function(){var e=Object(C.a)((function(e){return{root:{marginTop:50,marginLeft:50},titleText:{color:e.palette.primary.main,fontSize:25,marginBottom:20,marginTop:20}}}))();return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.titleText},"Site settings"),r.a.createElement(re.a,{variant:"middle"}),r.a.createElement(tt,null),r.a.createElement(re.a,{variant:"middle"}))},ot=function(e){var t=Object(C.a)((function(e){return{root:{marginTop:50,marginLeft:50},titleText:{color:e.palette.primary.main,fontSize:25,marginBottom:20,marginTop:20}}}))();return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.titleText},"User settings"),r.a.createElement(nt,{user:e.user}))},it=a(38),lt=function(){var e=Object(n.useState)(window.innerWidth>1e3),t=Object(_.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(),l=Object(_.a)(i,2),c=l[0],s=l[1],u=Object(n.useState)(!1),m=Object(_.a)(u,2),p=m[0],f=m[1];Object(n.useEffect)((function(){Ce()("http://localhost:3001").on("PROJECT_INVITE",(function(e){if(window.localStorage.getItem("authToken")){var t=window.localStorage.getItem("authToken"),a=it.decode(JSON.parse(t));parseInt(a.user_id)===e&&f(!0)}}))}),[]),Object(n.useEffect)((function(){if(window.localStorage.getItem("authToken")){var e=window.localStorage.getItem("authToken"),t=it.decode(JSON.parse(e));s({username:t.name,user_id:t.user_id})}else s(null)}),[]);var g=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:a?250:0},background:{position:"absolute",top:0,right:0,width:"100%",height:"calc(100% + 10px)"},notification:{backgroundColor:e.palette.secondary.light,display:"flex",flexDirection:"row",alignItems:"center",padding:"0px 5px 0px 10px"}}}))();Object(d.g)();return r.a.createElement(oe.a,{square:!0,className:g.background},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?o(!1):window.innerWidth>1e3&&o(!0)}}),r.a.createElement("div",{className:g.page},r.a.createElement(rt,null),void 0!==c&&null!==c?r.a.createElement(ot,{user:c}):null),r.a.createElement(ke.a,{className:g.snackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:p,autoHideDuration:3e3,onClose:function(){return f(!1)}},r.a.createElement(oe.a,{className:g.notification},r.a.createElement("div",{style:{fontSize:15,marginRight:15}},"New project invite!"),r.a.createElement(ee,{type:"icon",icon:"Close",onClick:function(){return f(!1)}}))))},ct=a(550),st=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(""),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(""),m=Object(_.a)(d,2),p=m[0],f=m[1],g=Object(n.useState)(!1),h=Object(_.a)(g,2),b=h[0],E=h[1],v=Object(D.a)((function(e){return{root:{width:400,height:450,backgroundColor:e.palette.secondary.light,padding:15},title:{fontSize:20,marginBottom:20,marginLeft:10},input:{backgroundColor:e.palette.background.default,display:"flex",flexDirection:"row",alignItems:"center",paddingLeft:10,paddingRight:10,height:50,marginBottom:15},message:{backgroundColor:e.palette.background.default,paddingLeft:10,paddingRight:5,height:200,width:"100%",display:"flex",flexDirection:"column",justifyContent:"flex-start"},count:{marginLeft:p.length<10?350:p.length<100?341:332}}}))();return r.a.createElement(ge.a,{className:v.root,component:"form",onSubmit:function(e){e.preventDefault(),E(!0),window.emailjs.send("gmail","feedback",{message_html:p,from_name:o,reply_to:s}).then((function(){i(""),u(""),f(""),E(!1)})).catch((function(e){console.log(e)}))}},r.a.createElement("div",{className:v.title},"Contact us"),r.a.createElement(oe.a,null,r.a.createElement(Ie.a,{placeholder:"Name",className:v.input,value:o,onChange:function(e){return i(e.target.value)}})),r.a.createElement(oe.a,null,r.a.createElement(Ie.a,{placeholder:"Email",className:v.input,value:s,onChange:function(e){return u(e.target.value)}})),r.a.createElement(oe.a,null,r.a.createElement(Ie.a,{multiline:!0,rowsMax:10,value:p,placeholder:"Message",className:v.message,onChange:function(e){return e.target.value.length<=500?f(e.target.value):null}})),r.a.createElement("div",{className:v.count},p.length+" / 500"),r.a.createElement("div",{style:{width:"100%",display:"flex",flexDirection:"row",justifyContent:"center",marginTop:10}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:b?40:0}},r.a.createElement(T.a,{variant:"contained",color:"primary",type:"submit"},"Submit"),b?r.a.createElement(ct.a,{color:"primary",size:30,style:{marginLeft:10}}):null)))},ut=a(38),dt=function(){var e=Object(n.useState)(window.innerWidth>1e3),t=Object(_.a)(e,2),a=t[0],o=t[1],i=Object(n.useState)(!1),l=Object(_.a)(i,2),c=l[0],s=l[1];Object(n.useEffect)((function(){Ce()("http://localhost:3001").on("PROJECT_INVITE",(function(e){if(window.localStorage.getItem("authToken")){var t=window.localStorage.getItem("authToken"),a=ut.decode(JSON.parse(t));parseInt(a.user_id)===e&&s(!0)}}))}),[]);var u=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:a?250:0,display:"flex",justifyContent:"center",paddingTop:50},background:{position:"absolute",top:0,right:0,width:"100%",height:"calc(100% + 10px)"}}}))();Object(d.g)();return r.a.createElement(oe.a,{square:!0,className:u.background},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?o(!1):window.innerWidth>1e3&&o(!0)}}),r.a.createElement("div",{className:u.page},r.a.createElement(st,null)),r.a.createElement(ke.a,{className:u.snackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:c,autoHideDuration:3e3,onClose:function(){return s(!1)}},r.a.createElement(oe.a,{className:u.notification},r.a.createElement("div",{style:{fontSize:15,marginRight:15}},"New project invite!"),r.a.createElement(ee,{type:"icon",icon:"Close",onClick:function(){return s(!1)}}))))},mt=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1];return r.a.createElement(ge.a,{style:{position:"absolute",width:300,height:200,left:"50%",top:"50%",marginLeft:-150,marginTop:-105}},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("project_id",parseInt(e.project_id)),a.append("role_name",o),f.a.post("/api/roles/new",a).then((function(t){e.onAddRole(o)})).catch((function(e){console.log(e)}))},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:50}},r.a.createElement("div",{style:{marginBottom:40}},r.a.createElement(at.a,{label:"Role name",variant:"filled",color:"primary",value:o,onChange:function(e){i(e.target.value)}})),r.a.createElement(T.a,{variant:"contained",color:"primary",type:"submit"},"Create role")))},pt=a(38),ft=function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(""),m=Object(_.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(""),b=Object(_.a)(h,2),E=b[0],v=b[1],y=Object(n.useState)(""),j=Object(_.a)(y,2),w=j[0],x=j[1],O=Object(n.useState)(!1),S=Object(_.a)(O,2),k=S[0],N=S[1],I=Object(C.a)((function(e){return{role:{height:50,display:"flex",alignItems:"center",paddingLeft:20,cursor:"pointer","&:hover":{backgroundColor:e.palette.secondary.light}},actionRole:{height:50,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer","&:hover":{backgroundColor:e.palette.secondary.light}},actionRoleSelected:{height:50,display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",backgroundColor:e.palette.secondary.light},roleSelected:{height:50,display:"flex",alignItems:"center",paddingLeft:20,cursor:"pointer",backgroundColor:e.palette.secondary.light},addMember:{width:300,height:150,position:"absolute",top:"50%",left:"50%",marginTop:"-75px",marginLeft:"-100px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center","&:focus":{outlineStyle:"none"}},usernameField:{width:150,height:50,backgroundColor:e.palette.secondary.light,marginRight:20,display:"flex",justifyContent:"center",paddingLeft:10},tagField:{width:75,height:50,backgroundColor:e.palette.secondary.light,display:"flex",justifyContent:"center",paddingLeft:10},errorMessage:{color:e.palette.primary.main,fontSize:15}}}))(),D=function(t){e.onChange(t.target.id)};return r.a.createElement(ce.a,{container:!0,style:{height:"100%"}},r.a.createElement(ce.a,{item:!0,style:{width:"100%",height:"100%"}},r.a.createElement(ge.a,{style:{height:"admin"===e.mode?"calc(100% - 150px)":"100%"},square:!0,elevation:0,value:e.selected},e.roles.map((function(t,a){if(a!==e.roles.length-1)return r.a.createElement("div",{key:a},r.a.createElement(oe.a,{elevation:0,square:!0,onClick:D,id:a,className:e.selected===a?I.roleSelected:I.role},t.api_role),r.a.createElement(re.a,{light:!0,variant:"middle"}))}))),"admin"===e.mode?r.a.createElement(ge.a,{className:I.actionRole,elevation:0,square:!0,onClick:function(){return u(!0)}},"Add member",r.a.createElement(Z.a,{style:{marginLeft:10},color:"primary"})):null,"admin"===e.mode?r.a.createElement(ge.a,{className:e.selected===e.roles.length-1?I.actionRoleSelected:I.actionRole,elevation:0,square:!0,onClick:e.onChangeMode},"Change roles",r.a.createElement(U.a,{style:{marginLeft:10},color:"primary"})):null,r.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:10}},"admin"===e.mode?r.a.createElement(ee,{type:"normal",variant:"contained",color:"primary",buttonText:"New role",onClick:function(){i(!0)}}):null),r.a.createElement(ie.a,{open:o,onClose:function(){i(!1)},disableScrollLock:!0},r.a.createElement("div",null,r.a.createElement(mt,{project_id:e.project_id,onAddRole:function(t){i(!1),e.onAddRole(t)}}))),r.a.createElement(ie.a,{disableScrollLock:!0,open:s,onClose:function(){return u(!1)}},r.a.createElement(ge.a,{className:I.addMember,component:"form",onSubmit:function(t){N(!0),t.preventDefault(),p.length<1?x("Please enter a username"):4===E.length?(x(""),f.a.get("/api/users/credential/"+p+"#"+E).then((function(t){t.data.length>0?t.data.forEach((function(t){if(t.username===p+"#"+E){var a=new FormData;a.append("project_id",e.project_id),a.append("user_id",t.user_id),f.a.post("/api/roles/invite",a).then((function(){N(!1);var a=Ce()("http://localhost:3001");a.emit("INVITE_SENT",t.user_id),a.on("PROJECT_INVITE",(function(t){if(window.localStorage.getItem("authToken")){var a=window.localStorage.getItem("authToken"),n=pt.decode(JSON.parse(a));console.log("Someone invited"),parseInt(n.user_id)===parseInt(t)&&e.setNotificationOpen(!0)}})),g(""),v(""),u(!1),e.onAddRole()})).catch((function(e){N(!1),void 0!==e.response.data.detail?x(e.response.data.detail):console.log(e)}))}})):x("User doesn't exist")})).catch((function(e){console.log(e)}))):x("Please enter the user's 4 digit tag")}},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},r.a.createElement(oe.a,{className:I.usernameField,square:!0},r.a.createElement(Ie.a,{placeholder:"Username",className:I.input,value:p,onChange:function(e){return e.target.value.length<25?g(e.target.value):null}})),r.a.createElement(oe.a,{className:I.tagField,square:!0},r.a.createElement(Ie.a,{placeholder:"0000",className:I.input,startAdornment:"#",value:E,onChange:function(e){e.target.value.length<5&&(0===e.target.value.length||!1===isNaN(e.target.value))&&v(e.target.value)}}))),r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:k?40:0}},r.a.createElement(T.a,{type:"submit",variant:"contained",color:"primary",style:{marginTop:10}},"Add user"),k?r.a.createElement(ct.a,{color:"primary",size:20,style:{marginLeft:10}}):null),r.a.createElement("div",{className:I.errorMessage},w)))))},gt=a(284),ht=a(564),bt=a(38),Et=function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(null),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(!1),m=Object(_.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(),b=Object(_.a)(h,2),E=b[0],v=b[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("authToken"),t=bt.decode(JSON.parse(e));v(t.user_id)}),[]);var y=Object(C.a)((function(e){return{user:{margin:"10px 0px 10px 20px",display:"flex",flexDirection:"row",alignItems:"center"},avatar:{width:50,height:50},usernameContainer:{display:"flex",alignItems:"center",marginLeft:20,height:50,width:"calc(100% - 320px)"},username:{fontSize:20,marginBottom:5},button:{width:200,padding:"5px 0px 5px 5px",overflow:"hidden",whiteSpace:"nowrap",display:"flex",justifyContent:"left"},buttonText:{width:160,overflow:"hidden",textAlign:"left"},confirm:{width:200,height:150,position:"absolute",top:"50%",left:"50%",marginTop:"-75px",marginLeft:"-100px"}}}))(),j=function(t){e.onChangeRole(e.user.role_id,t.currentTarget.textContent),w()},w=function(){i(!1),u(null)};return r.a.createElement(ce.a,{className:y.user,container:!0},r.a.createElement(ce.a,{item:!0},r.a.createElement(le.a,{className:y.avatar},r.a.createElement(ye,{user_id:e.user.user_id,width:50,height:50}))),r.a.createElement(ce.a,{item:!0,className:y.usernameContainer},r.a.createElement("div",{className:y.username},e.user.username)),!0===e.onChangeMode?r.a.createElement("div",null,r.a.createElement(ce.a,{item:!0},r.a.createElement(T.a,{className:y.button,color:"primary",variant:"outlined",onClick:function(e){i(!0),u(e.currentTarget)},endIcon:r.a.createElement(X.a,null)},r.a.createElement("div",{className:y.buttonText},e.userRole))),r.a.createElement(gt.a,{open:o,disableScrollLock:!0,anchorEl:s,onClose:w},e.roles.map((function(e,t){return"change_role"!==e.api_role?r.a.createElement(ht.a,{key:t,onClick:j},r.a.createElement("div",null,e.api_role)):null})))):null,!0===e.onChangeMode&&e.user.user_id!==E?r.a.createElement(ce.a,{item:!0,className:y.deleteButton},r.a.createElement(ee,{type:"icon",icon:"Delete",color:"primary",onClick:function(){return g(!0)}})):null,r.a.createElement(ie.a,{open:p,disableScrollLock:!0,onClose:function(){return g(!1)}},r.a.createElement("div",null,r.a.createElement(ge.a,{className:y.confirm,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(ce.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:4},r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{style:{fontSize:15,fontWeight:"bold"}},"This action is permanent")),r.a.createElement(ce.a,{item:!0},r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Remove user",color:"primary",onClick:function(){var t=new FormData;t.append("project_id",e.project_id),f.a.post("/api/roles/delete/"+e.user.role_id,t).then((function(){e.rerender(),g(!1)})).catch((function(e){console.log(e),g(!1)}))}})))))))},vt=function(e){return r.a.createElement(ge.a,{square:!0,elevation:0,style:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}},e.role.api_role_users.map((function(t,a){return-1===t.user_id?null:(e.roles.forEach((function(e){"change_role"!==e.api_role&&-1!==e.api_role_users.map((function(e){return e.username})).indexOf(t.username)&&(n=e.api_role)})),r.a.createElement(Et,{rerender:e.rerender,project_id:e.project_id,roles:e.roles,role:e.role,user:t,userRole:n,key:a,onChangeMode:e.onChangeMode,onChangeRole:e.onChangeRole}));var n})))},yt=a(551),jt=function(e){var t=Object(C.a)((function(e){return{leftButton:{width:30,height:30,backgroundColor:e.palette.primary.main,borderTopLeftRadius:5,borderBottomLeftRadius:5},center:{width:30,height:28,backgroundColor:e.palette.background.default,borderStyle:"solid",borderWidth:"1px 0px 1px 0px",borderColor:e.palette.primary.main,display:"flex",justifyContent:"center",alignItems:"center"},rightButton:{width:30,height:30,backgroundColor:e.palette.primary.main,borderTopRightRadius:5,borderBottomRightRadius:5},icon:{color:e.palette.background.default}}}))();return r.a.createElement("form",{style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center"}},r.a.createElement(te.a,{className:t.leftButton,onClick:function(){e.value>e.minValue&&e.onChange(e.value-1)},disabled:e.disabled},r.a.createElement(yt.a,{className:t.icon})),r.a.createElement(ge.a,{square:!0,elevation:0,className:t.center},r.a.createElement("div",{style:{marginBottom:1}},e.value)),r.a.createElement(te.a,{className:t.rightButton,onClick:function(){e.value<e.maxValue&&e.onChange(e.value+1)},disabled:e.disabled},r.a.createElement(Z.a,{className:t.icon})))},wt=function(e){var t=Object(C.a)((function(e){return{root:{marginTop:10}}}))(),a=function(){e.handleDelete(e.role.api_role)},n=function(t){if(9===e.role.api_role_users[0].authorisation_level&&1===e.roles.filter((function(e){return 9===e.api_role_users[0].authorisation_level})).length)return;e.handleUpdateAuth(e.role.api_role,t)};return r.a.createElement("div",null,function(){if("change_role"===e.role.api_role)return null;switch(e.mode){case"view":return r.a.createElement(ce.a,{container:!0,className:t.root,direction:"column",alignItems:"center"},r.a.createElement(ce.a,{item:!0,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%"}},r.a.createElement("div",{style:{height:20,width:"calc(100% - 110px)"}},"Authorisation level"),r.a.createElement(jt,{value:e.role.api_role_users[0].authorisation_level,disabled:!0,maxValue:9,minValue:1,onChange:n})));case"admin":return r.a.createElement(ce.a,{container:!0,className:t.root,direction:"column",alignItems:"center"},r.a.createElement(ce.a,{item:!0,style:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",width:"100%"}},r.a.createElement("div",{style:{height:20,width:"calc(100% - 110px)"}},"Authorisation level"),r.a.createElement(jt,{value:e.role.api_role_users[0].authorisation_level,maxValue:9,minValue:1,onChange:n})),r.a.createElement(ce.a,{item:!0,style:{display:"flex",justifyContent:"center",padding:10,marginTop:20}},r.a.createElement(ee,{type:"normal",variant:"outlined",buttonText:"Delete role",color:"primary",onClick:a})))}}())},xt=a(38),Ot=function(e){var t=Object(n.useState)([]),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(0),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)("view"),m=Object(_.a)(d,2),p=m[0],g=m[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("authToken");9===xt.decode(JSON.parse(e)).authLevel&&g("admin")}),[]);var h=function(){f.a.get("/api/roles/allusers/"+e.project_id).then((function(e){var t=[];e.data.forEach((function(e){-1===t.indexOf(e.role.role_name)&&(t=[].concat(Object(de.a)(t),[e.role.role_name]))}));var a=[],n=[];t.forEach((function(t){var r=[];e.data.forEach((function(e){e.role.role_name===t&&("-1"===e.role.user_id?r=[].concat(Object(de.a)(r),[{username:"PLACEHOLDER",user_id:-1,role_id:e.role.role_id,authorisation_level:e.role.authorisation_level}]):(n=[].concat(Object(de.a)(n),[{username:e.user[0].username,user_id:e.user[0].user_id,role_id:e.role.role_id}]),r=[].concat(Object(de.a)(r),[{username:e.user[0].username,user_id:e.user[0].user_id,role_id:e.role.role_id,authorisation_level:e.role.authorisation_level}])))})),a=[].concat(Object(de.a)(a),[{api_role:t,api_role_users:r}])})),a=[].concat(Object(de.a)(a),[{api_role:"change_role",api_role_users:n}]),i(a)}))};Object(n.useEffect)((function(){h()}),[]);var b=function(t){f.a.delete("/api/roles",{data:{role_name:t,project_id:e.project_id}}).then((function(){u((function(e){return 0===e?0:e-1})),h()})).catch((function(e){console.log(e)}))},E=function(){h()};return r.a.createElement(ce.a,{container:!0,direction:"row",style:{height:"100%",width:"100%",paddingTop:48}},r.a.createElement(ce.a,{item:!0,xs:3,style:{display:"flex"}},r.a.createElement(ft,{selected:s,project_id:e.project_id,onChange:function(e){u(parseInt(e))},roles:o,onAddRole:E,mode:p,onChangeMode:function(){u(o.length-1)},setNotificationOpen:e.setNotificationOpen}),r.a.createElement(re.a,{orientation:"vertical"})),r.a.createElement(ce.a,{item:!0,xs:s===o.length-1?9:5,style:{display:"flex",flexDirection:"row",justifyContent:"center"}},0===o.length?null:r.a.createElement(vt,{role:o[s],roles:o,project_id:e.project_id,onChangeRole:function(t,a){var n=new FormData;n.append("role_id",t),n.append("new_role",a),n.append("project_id",e.project_id),f.a.post("/api/roles/update",n).then((function(e){h()})).catch((function(e){console.log(e)}))},handleDelete:b,mode:p,rerender:E,onChangeMode:s===o.length-1}),s===o.length-1?null:r.a.createElement(re.a,{orientation:"vertical"})),s===o.length-1?null:r.a.createElement(ce.a,{item:!0,xs:4},0===o.length?null:r.a.createElement(wt,{handleDelete:b,handleUpdateAuth:function(t,a){var n=new FormData;n.append("role_name",t),n.append("project_id",e.project_id),n.append("auth_level",a),f.a.post("/api/roles/auth/update",n).then((function(){var e=Object(de.a)(o),n=e.filter((function(e){return e.api_role===t})),r=e.indexOf(n);n[0].api_role_users.forEach((function(e){e.authorisation_level=a})),e[r]=n,i(e)})).catch((function(e){console.log(e)}))},project_id:e.project_id,roles:o,role:o[s],mode:p})))},St=a(561),kt=a(93),_t=function(e){var t=Object(kt.a)(),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],d=function(t){!1!==e.listenForDrag&&t.clientX>=i.x&&t.clientX<=i.x+i.width&&t.clientY>=i.y&&t.clientY<=i.y+i.height?u(!0):u(!1)},m=function(t){!1!==e.listenForDrag&&t.clientX>=i.x&&t.clientX<=i.x+i.width&&t.clientY>=i.y&&t.clientY<=i.y+i.height&&g(e.listenForDrag)};Object(n.useEffect)((function(){return window.addEventListener("mouseup",m),window.addEventListener("mousemove",d),function(){window.removeEventListener("mouseup",m),window.removeEventListener("mousemove",d)}}),[m,d]);var p=Object(D.a)((function(e){return{crumb:{WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",cursor:"pointer",height:20,borderRadius:10,paddingBottom:2,width:"100%",marginRight:15,textAlign:"center",backgroundColor:s?e.palette.secondary.light:e.palette.background.default,"&:hover, &:focus":{backgroundColor:e.palette.secondary.light}}}}))(),g=function(t){var a=new FormData;a.append("child_id",parseInt(t.id)),a.append("type",t.type),f.a.post("/api/file_system/"+parseInt(e.folder_id),a).then((function(){e.rerender()})).catch((function(e){console.log(e)}))};return r.a.createElement("div",{ref:o,onClick:function(){return t=e.folder_id,void e.onReturn(t);var t},className:p.crumb},e.folder_name)},Ct=function(e){var t=Object(D.a)((function(e){return{root:{marginLeft:20,marginBottom:20,paddingTop:5,display:"flex",flexDirection:"row",alignItems:"center","& .MuiBreadcrumbs-separator":{height:20,display:"flex",flexDirection:"row",alignItems:"center",paddingTop:2}},finalCrumb:{WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none",height:20,borderRadius:10,paddingBottom:2,width:"100%",marginRight:15,textAlign:"center",color:e.palette.primary.main}}}))();return r.a.createElement("div",null,r.a.createElement(St.a,{separator:"\u203a",className:t.root},e.ancestry.map((function(a,n){return n===e.ancestry.length-1?r.a.createElement("div",{key:n,className:t.finalCrumb},a.folder_name):r.a.createElement(_t,{onReturn:e.onReturn,folder_id:a.folder_id,folder_name:a.folder_name,key:n,listenForDrag:e.listenForDrag,ancestry:e.ancestry,rerender:e.rerender})}))))},Nt=a(553),Tt=a(552),It=a(273),Dt=a.n(It),Lt=function(e){var t=Object(D.a)((function(e){return{root:{width:170,height:50,display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"light"===e.palette.type?e.palette.background.default:e.palette.secondary.light},cube:{width:16,height:16,margin:2,display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer","&:hover":{width:18,height:18}},clearCross:{color:"red",fontSize:22}}}))(),a=["red","orange","yellow","LimeGreen","green","blue","purple"],n=function(t){e.colorChange(t.target.id)};return r.a.createElement(ge.a,{id:"toolbar-element",className:t.root},function(){var e=a.map((function(e,a){return r.a.createElement(ge.a,{square:!0,onClick:n,key:a,id:e,className:t.cube,style:{backgroundColor:e}})}));return e=[].concat(Object(de.a)(e),[r.a.createElement(ge.a,{square:!0,onClick:n,key:a.length+1,id:null,className:t.cube,style:{backgroundColor:"white"}},r.a.createElement(Dt.a,{className:t.clearCross}))])}())},Rt=a(565),zt=a(539),Ft=a(538),At=function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useRef)(null),m=Object(n.useRef)(null),p=Object(D.a)((function(e){return{root:{marginTop:4,marginBottom:10,height:60},grid:{marginLeft:10},popper:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:e.palette.background.default,boxShadow:"dark"===e.palette.type?0:"0px 0px 15px 5px rgba(34, 35, 58, 0.2)"}}}))(),f=function(e){d.current&&d.current.contains(e.target)||m.current&&m.current.contains(e.target)||(i(!1),u(!1))};function g(e){"Tab"===e.key&&(e.preventDefault(),i(!1),u(!1))}var h=function(t){f(t),e.onClickUpload()},b=function(t){f(t),e.onCreateFolder()},E=function(t){e.onColorChange(t),u(!1)};return r.a.createElement(ge.a,{className:p.root,square:!0,elevation:0},r.a.createElement(ce.a,{container:!0,className:p.grid,spacing:3},r.a.createElement(ce.a,{item:!0},r.a.createElement(I.a,{ref:d,"aria-controls":o?"menu-list-grow":void 0,"aria-haspopup":"true",onClick:function(){i((function(e){return!e}))},variant:"contained"},r.a.createElement(Z.a,{fontSize:"default"})),r.a.createElement(Tt.a,{open:o,anchorEl:d.current,placement:"bottom-start",role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps;return r.a.createElement(Ft.a,t,r.a.createElement(oe.a,{className:p.popper},r.a.createElement(zt.a,{onClickAway:f},r.a.createElement(Rt.a,{autoFocusItem:o,id:"menu-list-grow",onKeyDown:g,style:{display:"flex",flexDirection:"column",alignItems:"left"}},r.a.createElement(ht.a,{onClick:h},r.a.createElement(Nt.a,{fontSize:"large",color:"secondary",style:{marginRight:10}}),"Add file"),r.a.createElement(ht.a,{onClick:b},r.a.createElement(V.a,{fontSize:"large",color:"secondary",style:{marginRight:10}}),"Add folder")))))}))),r.a.createElement(ce.a,{item:!0},r.a.createElement(ee,{type:"icon",icon:"Lock",variant:"contained",color:"default",disabled:null===e.selectedFolder||0!==e.selectedFolder.authorisation_level,onClick:function(){e.onAddAuth()}})),r.a.createElement(ce.a,{item:!0},r.a.createElement(I.a,{id:"toolbar-element",disabled:null===e.selectedFolder,onClick:function(){u((function(e){return!e}))},ref:m,"aria-controls":s?"menu-list-grow":void 0,"aria-haspopup":"true"},r.a.createElement(G.a,{fontSize:"default",id:"toolbar-element"}),null!==e.selectedFolder&&null!==e.selectedFolder.folder_color?r.a.createElement("div",{style:{width:24,height:4,background:e.selectedFolder.folder_color,position:"absolute",bottom:12}}):null),r.a.createElement(Tt.a,{open:s,anchorEl:m.current,placement:"bottom",role:void 0,transition:!0,disablePortal:!0},(function(e){var t=e.TransitionProps;return r.a.createElement(Ft.a,t,r.a.createElement(oe.a,{className:p.popper},r.a.createElement(zt.a,{onClickAway:f},r.a.createElement("div",null,r.a.createElement(Lt,{colorChange:E})))))})))),r.a.createElement(re.a,{variant:"middle"}))},Pt=a(275),Bt=a.n(Pt),Wt=a(140),Mt=a.n(Wt),Ut=a(181),Yt=a.n(Ut),Xt=a(276),qt=a.n(Xt),Jt=a(277),Vt=a.n(Jt),Gt=a(278),Ht=a.n(Gt),Zt={mouseX:null,mouseY:null},$t=function(e){var t=Object(n.useState)(Zt),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(null),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(kt.a)(),m=Object(_.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)({isDragging:!1,translateX:null,translateY:null}),b=Object(_.a)(h,2),E=b[0],v=b[1];Object(n.useEffect)((function(){v(Object(ue.a)({},E,{translateX:g.x,translateY:g.y}))}),[g]);var y=function(e){E.isDragging&&v((function(t){return Object(ue.a)({},t,{translateX:e.clientX,translateY:e.clientY})}))},j=function(t){E.isDragging&&(v((function(e){return Object(ue.a)({},e,{isDragging:!1})})),e.onDragStop())};Object(n.useEffect)((function(){return window.addEventListener("mousemove",y),window.addEventListener("mouseup",j),function(){window.removeEventListener("mousemove",y),window.removeEventListener("mouseup",j)}}),[y,j]);var w=function(){e.selectFile(e.file_id)},x=function(t){void 0!==t&&"folder-element"!==t.target.id&&"folder-element"!==t.target.parentNode.id&&"file-element"!==t.target.id&&"file-element"!==t.target.parentNode.id&&e.selectFile(null)},O=Object(D.a)((function(t){return{root:{cursor:"pointer",backgroundColor:parseInt(e.selected)===parseInt(e.file_id)?t.palette.secondary.light:t.palette.background.default,paddingLeft:10},text:{WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},draggable:{backgroundColor:t.palette.secondary.light}}}))(),S=[["jpg","png","jpeg"],["txt","docx"],["stl","3ds","f3d"],["mp4","mov","avi"],["mp3","wav","midi"]],k=function(){for(var t,a=0;a<S.length;a++)S[a].indexOf(e.fileType)>-1&&(t=a);switch(t){default:return r.a.createElement(Yt.a,{fontSize:"large",color:"secondary",id:"file-element"});case 0:return r.a.createElement(Mt.a,{fontSize:"large",color:"secondary",id:"file-element"});case 1:return r.a.createElement(Yt.a,{fontSize:"large",color:"secondary",id:"file-element"});case 2:return r.a.createElement(Bt.a,{fontSize:"large",color:"secondary",id:"file-element"});case 3:return r.a.createElement(qt.a,{fontSize:"large",color:"secondary"})}};return r.a.createElement("div",{ref:p,id:"file-element",onDragStart:"normal"===e.type?function(t){t.preventDefault(),v(Object(ue.a)({},E,{isDragging:!0})),e.onDragStart({id:e.file_id,type:"file"})}:null,style:{position:E.isDragging&&null!==E.translateX?"absolute":null,left:E.translateX,top:E.translateY},draggable:"normal"===e.type},!1===E.isDragging?r.a.createElement(zt.a,{onClickAway:x},r.a.createElement(ce.a,{container:!0,direction:"row",justify:"center",alignItems:"center",className:O.root,onClick:w,onContextMenu:function(t){e.selectFile(null),t.preventDefault(),w(),i({mouseX:t.clientX-2,mouseY:t.clientY-4})},id:"file-element"},r.a.createElement(ce.a,{item:!0,xs:1,style:{marginTop:2},id:"file-element"},"skeleton"===e.type?r.a.createElement(Ze.a,{variant:"circle",width:40,height:40,id:"file-element"}):k()),r.a.createElement(ce.a,{item:!0,xs:8,style:{marginTop:2},id:"file-element"},"skeleton"===e.type?r.a.createElement("div",{style:{width:"70%",marginTop:2},id:"file-element"},r.a.createElement(Ze.a,{variant:"text"}),r.a.createElement(Ze.a,{variant:"text"})):r.a.createElement(se.a,{className:O.text,id:"file-element"},e.fileName)),r.a.createElement(ce.a,{item:!0,xs:2,id:"file-element"},"skeleton"===e.type?r.a.createElement("div",{style:{width:"50%",marginTop:2},id:"file-element"},r.a.createElement(Ze.a,{variant:"text"}),r.a.createElement(Ze.a,{variant:"text"})):r.a.createElement(se.a,{className:O.text,id:"file-element"},e.fileType)),r.a.createElement(ce.a,{item:!0,xs:1,id:"file-element"},"normal"===e.type?r.a.createElement(r.a.Fragment,null,r.a.createElement(ee,{id:"file-element",type:"icon",icon:"More",color:"secondary",onClick:function(e){u(e.currentTarget)},"aria-controls":"simple-menu","aria-haspopup":"true"}),r.a.createElement(gt.a,{anchorEl:s,disableScrollLock:!0,id:"file-element",keepMounted:!0,open:Boolean(s)||null!==o.mouseY,onClose:function(){i(Zt),x(),u(null)},getContentAnchorEl:null,anchorOrigin:{vertical:(o.mouseY,"bottom"),horizontal:null!==o.mouseY?"right":"center"},transformOrigin:{vertical:(o.mouseY,"top"),horizontal:null!==o.mouseY?"left":"center"},anchorReference:null!==o.mouseY?"anchorPosition":"anchorEl",anchorPosition:null!==o.mouseY&&null!==o.mouseX?{top:o.mouseY,left:o.mouseX}:void 0},r.a.createElement(ht.a,{onClick:function(){var t=new FormData;t.append("folder_id",parseInt(e.folder_id)),t.append("type","file");var a="/api/file_system/delete/"+e.file_id;f.a.post(a,t).then((function(t,a){a?console.log(a):(u(null),e.updateParent("props.fileIndex"))}))},id:"file-element"},r.a.createElement(Vt.a,{fontSize:"small",color:"secondary"}),"Delete"),r.a.createElement(ht.a,{onClick:function(){var t="http://localhost:3001/api/files/"+parseInt(e.file_id),a=document.createElement("a");a.href=t,document.body.appendChild(a),a.click(),document.body.removeChild(a)},id:"file-element"},r.a.createElement(Ht.a,{fontSize:"small",color:"secondary"}),"Download"))):null))):r.a.createElement(oe.a,{style:{padding:5},className:O.draggable},r.a.createElement(ce.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},r.a.createElement(ce.a,{item:!0,style:{marginRight:5}},k()),r.a.createElement(ce.a,{item:!0},r.a.createElement("div",null,e.fileName)))))},Kt=a(182),Qt=a.n(Kt),ea=function(e){var t=Object(n.useState)(e.defaultValue),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(D.a)((function(e){return{root:{position:"absolute",width:300,height:200,left:"50%",top:"50%",marginLeft:-150,marginTop:-105}}}))();return r.a.createElement(ge.a,{className:l.root},r.a.createElement("form",{onSubmit:function(t){t.preventDefault();var a=new FormData;a.append("new_name",o),f.a.post("/api/folders/"+e.folder_id,a).then((function(){e.close()})).catch((function(e){console.log(e)}))},style:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",marginTop:50}},r.a.createElement("div",{style:{marginBottom:40}},r.a.createElement(at.a,{label:"Project name",variant:"filled",color:"primary",value:o,onChange:function(e){i(e.target.value)}})),r.a.createElement(T.a,{variant:"contained",color:"primary",type:"submit"},"Rename")))};var ta=a(279),aa=a.n(ta),na=function(e){var t=Object(n.useState)(e.level),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(me.a)(),c=function(e,t){var a=Object(n.useState)(e),r=Object(_.a)(a,2),o=r[0],i=r[1];return Object(n.useEffect)((function(){var a=setTimeout((function(){i(e)}),t);return function(){clearTimeout(a)}}),[e]),o}(o,150);Object(n.useEffect)((function(){e.onChangeAuth(o)}),[c]);var s=Object(D.a)((function(t){return{image:{width:"edit"===e.mode?75:50,height:"edit"===e.mode?75:50},editCard:{position:"absolute",left:"50%",top:"50%",marginTop:"-50px",marginLeft:"-100px",width:200,height:100,borderRadius:50,display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}}}))(),u=function(){switch(l.palette.type){case"light":return"edit"===e.mode?"/static/images/authorisation-"+o+".svg":"/static/images/authorisation-"+e.level+".svg";case"dark":return"edit"===e.mode?"/static/images/authorisation-"+o+"-dark.svg":"/static/images/authorisation-"+e.level+"-dark.svg"}},d=function(){o>0&&i((function(e){return e-1}))},m=function(){o<9&&i((function(e){return e+1}))};return r.a.createElement("div",null,"edit"===e.mode?r.a.createElement(ge.a,{className:s.editCard},r.a.createElement(ee,{type:"icon",icon:"ArrowLeft",onClick:d,disabled:0===o}),0===o?r.a.createElement(aa.a,{fontSize:"large"}):r.a.createElement("img",{id:e.markerId,className:s.image,src:u()}),r.a.createElement(ee,{type:"icon",icon:"ArrowRight",onClick:m,disabled:9===o})):r.a.createElement("img",{id:e.markerId,className:s.image,src:u()}))},ra=a(38),oa={mouseX:null,mouseY:null},ia=Object(g.b)((function(e){return{projectSettings:e.projectSettings}}),{changeSettingsAuth:b})((function(e){var t,a=Object(n.useState)(oa),o=Object(_.a)(a,2),i=o[0],l=o[1],c=Object(n.useState)(!1),s=Object(_.a)(c,2),u=s[0],d=s[1],m=Object(n.useState)(!1),p=Object(_.a)(m,2),g=p[0],h=p[1],b=Object(n.useState)(!1),E=Object(_.a)(b,2),v=E[0],y=E[1],j=Object(n.useState)(!1),w=Object(_.a)(j,2),x=w[0],O=w[1],S=Object(kt.a)(),k=Object(_.a)(S,2),C=k[0],N=k[1],T=Object(n.useState)({isDragging:!1,translateX:null,translateY:null}),I=Object(_.a)(T,2),L=I[0],z=I[1],F=Object(n.useRef)(null);Object(n.useEffect)((function(){z(Object(ue.a)({},L,{translateX:N.x,translateY:N.y}))}),[N]);var A=function(t){L.isDragging&&z((function(e){return Object(ue.a)({},e,{translateX:t.clientX,translateY:t.clientY})})),!1!==e.listenForDrag&&(t.clientX>=N.x&&t.clientX<=N.x+170&&t.clientY>=N.y&&t.clientY<=N.y+200?O(!0):O(!1))},B=function(t){L.isDragging&&(z((function(e){return Object(ue.a)({},e,{isDragging:!1})})),e.onDragStop()),e.listenForDrag&&x&&M(e.listenForDrag)};Object(n.useEffect)((function(){return window.addEventListener("mouseup",B),window.addEventListener("mousemove",A),function(){window.removeEventListener("mouseup",B),window.removeEventListener("mousemove",A)}}),[B,A]);var W=Object(D.a)((function(t){return{root:{width:170,height:200,backgroundColor:e.selected||x&&!1!==e.listenForDrag?t.palette.secondary.main:t.palette.secondary.light,display:"flex",flexDirection:"column",alignItems:"center"},centralCircle:{width:100,height:100,borderRadius:50,marginTop:0!==e.authorisation_level?-35:40,backgroundColor:t.palette.background.default,display:"flex",justifyContent:"center",alignItems:"center"},folderIcon:{fontSize:40,color:null===e.folderColor?t.palette.secondary.main:e.folderColor},name:{height:30,width:150,marginTop:10,marginBottom:10,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",textAlign:"center",fontSize:18,WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},authMarker:{marginLeft:105,marginBottom:15,marginTop:5,WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"},arrowDropUp:{position:"relative",top:"-20px"},draggable:{backgroundColor:t.palette.secondary.light}}}))(),M=function(t){if(t.id!==e.folder_id){var a=new FormData;a.append("child_id",parseInt(t.id)),a.append("type",t.type),f.a.post("/api/file_system/"+e.folder_id,a).then((function(){e.rerender()})).catch((function(e){console.log(e)}))}},Y=function(t){void 0!==t&&"folder-element"!==t.target.id&&"folder-element"!==t.target.parentNode.id&&"toolbar-element"!==t.target.id&&"toolbar-element"!==t.target.parentNode.id&&e.selectFolder(null)},X=function(){l(oa),Y()},q=function(e){F.current&&F.current.contains(e.target)||y(!1)},J=function(t){var a=new FormData;a.append("new_auth",t),f.a.post("/api/file_system/auth/"+e.folder_id,a).then((function(){e.rerender()})).catch((function(e){console.log(e)}))};return r.a.createElement("div",null,L.isDragging?r.a.createElement(ge.a,{style:{borderWidth:1,borderStyle:"solid",width:168,height:198}}):null,r.a.createElement("div",{onDragStart:function(t){t.preventDefault(),z(Object(ue.a)({},L,{isDragging:!0})),e.onDragStart({id:e.folder_id,type:"folder"})},style:{position:L.isDragging&&null!==L.translateX?"absolute":null,left:L.translateX,top:L.translateY},draggable:!0},L.isDragging?r.a.createElement("div",null,r.a.createElement(oe.a,{style:{padding:5},draggable:!0,className:W.draggable},r.a.createElement(ce.a,{container:!0,direction:"row",alignItems:"center",justify:"center"},r.a.createElement(ce.a,{item:!0,style:{marginRight:5}},r.a.createElement(Qt.a,{fontSize:"large",color:"secondary"})),r.a.createElement(ce.a,{item:!0},r.a.createElement("div",null,e.folder_name))))):r.a.createElement("div",null,r.a.createElement(zt.a,{onClickAway:Y},r.a.createElement(ge.a,(t={ref:C},Object(Be.a)(t,"ref",F),Object(Be.a)(t,"id","folder-element"),Object(Be.a)(t,"className",W.root),Object(Be.a)(t,"onClick",(function(){e.selectFolder(e.folder_id)})),Object(Be.a)(t,"onDoubleClick",(function(){e.handleEnterFolder(e.folder_id,e.authorisation_level),Y()})),Object(Be.a)(t,"onContextMenu",(function(t){e.selectFolder(e.folder_id),t.preventDefault(),l({mouseX:t.clientX-2,mouseY:t.clientY-4})})),Object(Be.a)(t,"style",{cursor:null===i.mouseY?"pointer":"context-menu"}),t),0!==e.authorisation_level?r.a.createElement("div",{id:"folder-element",className:W.authMarker},r.a.createElement(na,{level:e.authorisation_level,onChangeAuth:J,mode:"view"})):null,r.a.createElement("div",{className:W.centralCircle,id:"folder-element"},r.a.createElement(Qt.a,{className:W.folderIcon,id:"folder-element"})),r.a.createElement("div",{className:W.name,id:"folder-element"},e.folder_name))),r.a.createElement(gt.a,{keepMounted:!0,disableScrollLock:!0,open:null!==i.mouseY&&function(){var t=window.localStorage.getItem("authToken");return ra.decode(JSON.parse(t)).authLevel>=e.projectSettings.editFilesAuth}(),id:"folder-element",onClose:X,anchorReference:"anchorPosition",anchorPosition:null!==i.mouseY&&null!==i.mouseX?{top:i.mouseY,left:i.mouseX}:void 0},r.a.createElement(ht.a,{onClick:function(){d(!0),X()},style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(U.a,{style:{marginRight:10}}),"Rename"),r.a.createElement(ht.a,{onClick:e.authorisation_level>0?function(){h(!0),X()}:e.onAddAuth,style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(P.a,{style:{marginRight:10}}),e.authorisation_level>0?"Edit authorisation":"Add authorisation"),r.a.createElement(ht.a,{onClick:function(){e.onDelete(e.folder_id),X()},style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(R.a,{style:{marginRight:10}}),"Delete"),r.a.createElement(ht.a,{onClick:function(){y(!0),X()},id:"folder-element",style:{display:"flex",flexDirection:"row",alignItems:"center"}},r.a.createElement(G.a,{fontSize:"default",id:"toolbar-element",style:{marginRight:10}}),null!==e.selectedFolder?r.a.createElement("div",{style:{width:24,height:4,background:e.selectedFolder.folder_color,position:"absolute",bottom:6}}):null,"Color")),r.a.createElement(ie.a,{open:u,onClose:function(){return d(!1)}},r.a.createElement("div",null,r.a.createElement(ea,{close:function(){d(!1),e.rerender()},defaultValue:e.folder_name,folder_id:e.folder_id}))),r.a.createElement(ie.a,{open:g,onClose:function(){return h(!1)},disablePortal:!0},r.a.createElement("div",null,r.a.createElement(na,{mode:"edit",level:e.authorisation_level,onChangeAuth:J}))),r.a.createElement(Tt.a,{open:v,anchorEl:F.current,id:"folder-element",placement:"right",role:void 0,transition:!0,disablePortal:!0},(function(t){var a=t.TransitionProps;return r.a.createElement(Ft.a,a,r.a.createElement(oe.a,{className:W.popper},r.a.createElement(zt.a,{onClickAway:q},r.a.createElement("div",null,r.a.createElement(Lt,{colorChange:e.onColorChange})))))})))))})),la={mouseX:null,mouseY:null},ca=function(e){var t=Object(n.useState)(la),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(null),m=Object(_.a)(d,2),p=m[0],g=m[1],h=Object(n.useState)(null),b=Object(_.a)(h,2),E=b[0],v=b[1],y=Object(n.useState)(!1),j=Object(_.a)(y,2),w=j[0],x=j[1],O=Object(n.useState)([]),S=Object(_.a)(O,2),k=S[0],C=S[1],N=Object(D.a)((function(e){return{root:{width:"95%",height:"100%",marginLeft:10},folderContainer:{marginLeft:30},fileContainer:{marginTop:30}}}))(),T=function(t){e.rerender()},I=function(e){console.log(e),v(e)},L=function(){W();var t=new FormData;t.append("project_id",e.project_id),t.append("folder_id",e.folder.folder_id),f.a.post("/api/file_system/folder",t).then((function(){e.rerender()})).catch((function(e){console.log(e)}))},R=function(t){var a=new FormData;a.append("type","folder"),a.append("folder_id",e.folder.folder_id),f.a.post("/api/file_system/delete/"+t,a).then((function(){e.rerender()})).catch((function(e){console.log(e)}))},z=function(){u(!0),W()},F=function(t){null===t?g(null):(g(null),e.folder.folders.forEach((function(e){e.folder_id===t&&g(e)})))},A=function(){var t=new FormData;t.append("new_auth",1),f.a.post("/api/file_system/auth/"+p.folder_id,t).then((function(){e.rerender()})).catch((function(e){console.log(e)}))},P=function(e){x(e)},B=function(){x(!1)},W=function(){i(la)},M=function(t){var a=new FormData;a.append("color",t),f.a.post("/api/file_system/color/"+p.folder_id,a).then((function(){e.rerender(),g(null)})).catch((function(e){console.log(e)}))},U=function(t,a){var n;g(null),e.folder.folders.forEach((function(e){e.folder_id===t&&(n=e.folder_name)})),e.handleEnterFolder(t,n,a)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{onClickUpload:z,onCreateFolder:L,onAddAuth:A,selectedFolder:p,onColorChange:M}),r.a.createElement(Ct,{ancestry:e.ancestry,onReturn:e.onReturn,listenForDrag:w,rerender:e.rerender}),r.a.createElement(ge.a,{className:N.root,square:!0,elevation:0,onContextMenu:function(e){e.preventDefault(),void 0!==e&&"folder-element"!==e.target.id&&"folder-element"!==e.target.parentNode.id&&"file-element"!==e.target.id&&"file-element"!==e.target.parentNode.id&&i({mouseX:e.clientX-2,mouseY:e.clientY-4})}},r.a.createElement(ce.a,{className:N.folderContainer,container:!0,direction:"row",spacing:6},e.folder.folders.map((function(t,a){return r.a.createElement(ce.a,{item:!0,key:a},r.a.createElement(ia,{listenForDrag:w,onAddAuth:A,onColorChange:M,onDragStart:P,onDragStop:B,folder_name:t.folder_name,authorisation_level:t.authorisation_level,handleEnterFolder:U,folder_id:t.folder_id,folderColor:t.folder_color,onDelete:R,rerender:e.rerender,selectFolder:F,selectedFolder:p,selected:null!==p&&p.folder_id===t.folder_id}))}))),r.a.createElement("div",{className:N.fileContainer},k.map((function(e,t){return r.a.createElement($t,{type:"skeleton",key:t})})),e.folder.files.map((function(t,a){return e.folder.files.length===a+1?r.a.createElement("div",{key:a,"data-testid":"component-file"},r.a.createElement($t,{selected:E,selectFile:I,type:"normal",key:a,fileIndex:a,fileType:t.file_type,fileName:t.file_name,file_id:t.file_id,updateParent:T,folder_id:e.folder.folder_id,onDragStart:P,onDragStop:B})):r.a.createElement("div",{key:a},r.a.createElement("div",{"data-testid":"component-file",key:a},r.a.createElement($t,{type:"normal",selected:E,selectFile:I,fileIndex:a,fileType:t.file_type,fileName:t.file_name,file_id:t.file_id,updateParent:T,folder_id:e.folder.folder_id,onDragStart:P,onDragStop:B})),r.a.createElement(re.a,{light:!0,key:"divider"+a}))})))),r.a.createElement(ie.a,{open:s,onClose:function(){return u(!1)},disableScrollLock:!0},r.a.createElement("div",null,r.a.createElement(ve,{updateParent:function(){e.rerender()},onFileUploaded:function(){var e=Object(de.a)(k);e.shift(),C(e)},addSkeleton:function(e){k.length<e&&C((function(e){return[].concat(Object(de.a)(e),[0])}))},credentialType:"project_id",credential:e.project_id,folder_id:e.folder.folder_id,maxFiles:5,endpoint:"/file_system/file"}))),r.a.createElement(gt.a,{keepMounted:!0,disableScrollLock:!0,open:null!==o.mouseY,onClose:W,anchorReference:"anchorPosition",anchorPosition:null!==o.mouseY&&null!==o.mouseX?{top:o.mouseY,left:o.mouseX}:void 0},r.a.createElement(ht.a,{style:{display:"flex",flexDirection:"row",alignItems:"center"},onClick:z},r.a.createElement(Nt.a,{style:{marginRight:10}}),"Add file"),r.a.createElement(ht.a,{style:{display:"flex",flexDirection:"row",alignItems:"center"},onClick:L},r.a.createElement(V.a,{style:{marginRight:10}}),"Add folder")))},sa=a(38),ua=function(e){var t=Object(n.useState)(),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(null),u=Object(_.a)(l,2),d=u[0],m=u[1];Object(n.useEffect)((function(){return g(e.project_id),function(){return i([])}}),[]);var p=function(){g(e.project_id)},g=function(){var e=Object(s.a)(c.a.mark((function e(t){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/file_system/"+t,e.next=3,f.a.get(a).then((function(e){200===e.status&&(i(e.data),null===d&&m([{folder_id:e.data.folder_id,folder_name:e.data.folder_name}]))})).catch((function(e){console.log(e)}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{style:{height:"calc(100% - 87)"}},void 0!==o&&null!==d?r.a.createElement(ca,{onReturn:function(e){var t;d.forEach((function(a,n){a.folder_id===e&&(t=n+1)})),m(Object(de.a)(d).slice(0,t))},ancestry:d,folder:function(){var e=o;return 1===d.length?o:(d.forEach((function(t){e.folders.forEach((function(a){a.folder_id===t.folder_id&&(e=a)}))})),e)}(),rerender:p,handleEnterFolder:function(e,t,a){var n=window.localStorage.getItem("authToken");sa.decode(JSON.parse(n)).authLevel>=a&&(m([].concat(Object(de.a)(d),[{folder_id:e,folder_name:t}])),p())},project_id:e.project_id}):null)},da=a(554),ma=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1];Object(n.useEffect)((function(){f.a.get("/api/thumbnails/"+e.project_id).then((function(e){var t=("data:image/png;base64,"+function(e){var t="";return[].slice.call(new Uint8Array(e)).forEach((function(e){return t+=String.fromCharCode(e)})),window.btoa(t)}(e.data.data.data)).toString();i(t)})).catch((function(e){"No thumbnail"===e.response.data&&i(null)}))}),[]);var d=Object(C.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:null,height:150,width:350,overflow:"visible",display:"flex",boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},thumbnail:{width:200,height:150,marginTop:e.spacing(-4),borderRadius:e.spacing(1),marginLeft:e.spacing(4),boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},uploadButton:{height:20,marginTop:17},content:{width:110},placeholder:{width:200,height:150,marginTop:e.spacing(-4),borderRadius:e.spacing(1),marginLeft:e.spacing(4),boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)",display:"flex",justifyContent:"center",alignItems:"center",background:e.palette.secondary.main}}}))();return r.a.createElement(ge.a,{className:d.root},null===o?r.a.createElement(oe.a,{className:d.placeholder},r.a.createElement(Mt.a,{style:{fontSize:70}})):r.a.createElement(Ue.a,{component:"img",image:o,className:d.thumbnail}),r.a.createElement(da.a,{className:d.content},r.a.createElement(ce.a,{container:!0,direction:"column",alignItems:"flex-end"},r.a.createElement(ce.a,{item:!0},r.a.createElement(se.a,{variant:"h6",className:d.text},"Project")),r.a.createElement(ce.a,{item:!0},r.a.createElement(se.a,{variant:"h6",className:d.text},"Thumbnail")),r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{className:d.uploadButton},"admin"===e.mode?r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Upload",color:"primary",onClick:function(){u(!0)}}):null)))),r.a.createElement(ie.a,{disableScrollLock:!0,open:s,onClose:function(){u(!1)}},r.a.createElement("div",null,r.a.createElement(ve,{updateParent:function(){window.location.reload(!1)},credentialType:"project_id",credential:e.project_id,maxFiles:1,endpoint:"/thumbnails/update"}))))},pa=function(e){var t=Object(n.useState)(""),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],d=r.a.useRef(null);Object(n.useEffect)((function(){f.a.get("/api/projects/"+e.project_id).then((function(e){i(e.data[0].project_name)}))}),[]);var m=Object(C.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:null,height:150,width:400,display:"flex",justifyContent:"center",alignItems:"center",boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},inputPaper:{width:300,height:50,backgroundColor:"dark"===e.palette.type?null:e.palette.secondary.light,padding:10},input:{height:50,fontSize:20,width:242},inputText:{"&:disabled":{color:e.palette.secondary.contrastText}}}}))();return r.a.createElement(ge.a,{className:m.root},r.a.createElement(oe.a,{component:"form",onSubmit:function(t){t.preventDefault(),u(!1),f.a.get("/api/projects/"+e.project_id).then((function(t,a){a?console.log(a.response):f.a.post("/api/projects/"+e.project_id,{project_name:o,is_public:t.data[0].is_public})}))},square:!0,elevation:0,className:m.inputPaper,style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center"}},r.a.createElement(Ie.a,{inputRef:d,disabled:!s,value:o,className:m.input,inputProps:{style:{textAlign:"center"},className:m.inputText},onChange:function(e){i(e.target.value)}}),r.a.createElement("div",{style:{width:"admin"===e.mode?48:0}},"admin"===e.mode?r.a.createElement(ee,{type:"icon",icon:"Edit",variant:"contained",onClick:function(){s?u(!1):(setTimeout((function(){d.current.focus()}),100),u(!0))}}):null)))},fa=a(562),ga=function(e){var t=Object(n.useState)(e.default),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(C.a)((function(e){return{root:{width:300},slider:{marginLeft:10,"&.Mui-disabled":{color:e.palette.primary.main}},text:{marginLeft:6,fontSize:16}}}))();return r.a.createElement("div",{className:l.root},r.a.createElement(se.a,{variant:"body2",className:l.text},e.title),r.a.createElement(fa.a,{className:l.slider,onChangeCommitted:function(t,a){e.onChange(e.setting,a)},onChange:function(e,t){i(t)},value:o,step:1,marks:function(){for(var e=[],t=0;t<9;t++)e=[].concat(Object(de.a)(e),[{value:t+1,label:(t+1).toString()}]);return e}(),min:1,max:9,disabled:e.disabled}))},ha=a(38),ba=Object(g.b)((function(e){return{projectSettings:e.projectSettings}}),{changeSettingsAuth:b,editFilesAuth:E})((function(e){var t=Object(n.useState)("view"),a=Object(_.a)(t,2),o=a[0],i=a[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("authToken");9===ha.decode(JSON.parse(e)).authLevel&&i("admin")}),[]);var l=Object(C.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:null,height:200,width:400,padding:15,display:"flex",flexDirection:"column",justifyContent:"center",boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},title:{marginLeft:5,marginBottom:10}}}))(),c=function(t,a){var n=new FormData;n.append("setting_name",t),n.append("new_value",a),f.a.post("/api/project_settings/"+e.project_id,n).catch((function(e){console.log(e)}))},s=function(t,a){switch(t){case"changeSettingsAuth":return c(t,a),void e.changeSettingsAuth(a);case"editFilesAuth":return c(t,a),void e.editFilesAuth(a)}};return r.a.createElement(ge.a,{className:l.root},r.a.createElement(se.a,{variant:"h6",className:l.title},"Authorisation level needed to:"),r.a.createElement(ga,{title:"Change project settings",onChange:s,setting:"changeSettingsAuth",default:e.projectSettings.changeSettingsAuth,disabled:"view"===o}),r.a.createElement(ga,{title:"Edit file system",onChange:s,setting:"editFilesAuth",default:e.projectSettings.editFilesAuth,disabled:"view"===o}))})),Ea=a(38),va=function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(!1),c=Object(_.a)(l,2),s=c[0],u=c[1],m=Object(n.useState)(!1),p=Object(_.a)(m,2),g=p[0],h=p[1],b=Object(D.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:null,height:150,width:350,display:"flex",boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},confirm:{width:200,height:150,position:"absolute",top:"50%",left:"50%",marginTop:"-75px",marginLeft:"-100px"}}}))(),E=Object(d.g)();return r.a.createElement("div",null,r.a.createElement(ge.a,{className:b.root},r.a.createElement(ce.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:4},r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{style:{fontSize:20,fontWeight:"bold"}},"Delete Project")),r.a.createElement(ce.a,{item:!0},r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Delete",color:"primary",onClick:function(){var e=window.localStorage.getItem("authToken");9===Ea.decode(JSON.parse(e)).authLevel?u(!0):i("Must be authorisation level 9")}})),r.a.createElement(ce.a,{item:!0},r.a.createElement("div",null,o||"This action cannot be undone")))),r.a.createElement(ie.a,{open:s,onClose:function(){return u(!1)}},r.a.createElement("div",null,r.a.createElement(ge.a,{className:b.confirm,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(ce.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:4},r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{style:{fontSize:15,fontWeight:"bold"}},"This action is permanent")),r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",marginLeft:g?40:0}},r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Delete",color:"primary",onClick:function(){h(!0),f.a.delete("/api/projects/"+e.project_id).then((function(){h(!1),E.goBack()})).catch((function(e){h(!1),console.log(e)}))}}),g?r.a.createElement(ct.a,{color:"primary",size:20,style:{marginLeft:10}}):null)))))))},ya=function(e){var t=Object(n.useState)(!1),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(D.a)((function(e){return{root:{backgroundColor:"dark"===e.palette.type?e.palette.secondary.light:null,height:150,width:300,display:"flex",boxShadow:"dark"===e.palette.type?0:"0px 6px 15px rgba(34, 35, 58, 0.2)"},confirm:{width:200,height:150,position:"absolute",top:"50%",left:"50%",marginTop:"-75px",marginLeft:"-100px"}}}))(),c=Object(d.g)();return r.a.createElement("div",null,r.a.createElement(ge.a,{className:l.root},r.a.createElement(ce.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:4},r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{style:{fontSize:20,fontWeight:"bold"}},"Leave Project")),r.a.createElement(ce.a,{item:!0},r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Leave project",color:"primary",onClick:function(){return i(!0)}})),r.a.createElement(ce.a,{item:!0},r.a.createElement("div",null,"This action cannot be undone")))),r.a.createElement(ie.a,{open:o,disableScrollLock:!0,onClose:function(){return i(!1)}},r.a.createElement("div",null,r.a.createElement(ge.a,{className:l.confirm,style:{display:"flex",justifyContent:"center",alignItems:"center"}},r.a.createElement(ce.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:4},r.a.createElement(ce.a,{item:!0},r.a.createElement("div",{style:{fontSize:15,fontWeight:"bold"}},"This action is permanent")),r.a.createElement(ce.a,{item:!0},r.a.createElement(ee,{type:"normal",variant:"contained",buttonText:"Leave project",color:"primary",onClick:function(){var t=new FormData;t.append("project_id",e.project_id),f.a.post("/api/roles/delete/"+e.role_id,t).then((function(){c.goBack(),i(!1)})).catch((function(e){console.log(e),i(!1)}))}})))))))},ja=a(38),wa=Object(g.b)((function(e){return{projectSettings:e.projectSettings}}),{changeSettingsAuth:b})((function(e){var t=Object(n.useState)("view"),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(),c=Object(_.a)(l,2),s=c[0],u=c[1];Object(n.useEffect)((function(){var t=window.localStorage.getItem("authToken"),a=ja.decode(JSON.parse(t));a.authLevel>=e.projectSettings.changeSettingsAuth&&(i("admin"),u(a.role_id))}),[]);var d=Object(D.a)((function(e){return{grid:{flexGrow:1,width:"100%",paddingTop:48}}}))();return r.a.createElement(ce.a,{container:!0,spacing:8,className:d.grid,style:{marginLeft:50,width:"calc(100% - 50px)"}},r.a.createElement(ce.a,{item:!0},r.a.createElement(ma,{project_id:e.project_id,mode:o})),r.a.createElement(ce.a,{item:!0},r.a.createElement(pa,{project_id:e.project_id,mode:o})),r.a.createElement(ce.a,{item:!0},r.a.createElement(va,{project_id:e.project_id})),r.a.createElement(ce.a,{item:!0},r.a.createElement(ya,{project_id:e.project_id,role_id:s})),r.a.createElement(ce.a,{item:!0},r.a.createElement(ba,{project_id:e.project_id})))})),xa=a(555),Oa=a(557),Sa=Object(g.b)((function(e){return{projectSettings:e.projectSettings}}),{})((function(e){var t=r.a.useState(0),a=Object(_.a)(t,2),n=a[0],o=a[1],i=Object(C.a)((function(e){return{root:{display:"inline-flex",justifyContent:"center",alignItems:"center"}}}))(),l=function(e){return{id:"scrollable-auto-tab-".concat(e),"aria-controls":"scrollable-auto-tabpanel-".concat(e)}};return r.a.createElement("div",{className:i.root},r.a.createElement(Oa.a,{value:n,onChange:function(t,a){o(a),e.changePage(a)},indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},r.a.createElement(xa.a,Object.assign({label:"Files"},l(0))),r.a.createElement(xa.a,Object.assign({label:"Team"},l(1))),r.a.createElement(xa.a,Object.assign({label:"Settings"},l(2)))))})),ka=a(38),_a=Object(g.b)((function(e){return{projectSettings:e.projectSettings}}),{changeSettingsAuth:b,editFilesAuth:E})((function(e){var t=Object(n.useState)(window.innerWidth>1e3),a=Object(_.a)(t,2),o=a[0],i=a[1],l=Object(n.useState)(0),c=Object(_.a)(l,2),s=c[0],u=c[1],d=Object(n.useState)(parseInt(e.match.params.project_id)),m=Object(_.a)(d,1)[0],p=Object(n.useState)(!1),g=Object(_.a)(p,2),h=g[0],b=g[1];Object(n.useEffect)((function(){Ce()("http://localhost:3001").on("PROJECT_INVITE",(function(e){if(window.localStorage.getItem("authToken")){var t=window.localStorage.getItem("authToken"),a=ka.decode(JSON.parse(t));console.log("Someone invited"),parseInt(a.user_id)===parseInt(e)&&b(!0)}}))}),[]),Object(n.useEffect)((function(){var t=window.localStorage.getItem("authToken"),a=new FormData;a.append("token",t),a.append("project_id",m),f.a.post("/api/auth/authlevel",a).then((function(t){var a=JSON.stringify(t.headers["x-auth-token"]);window.localStorage.setItem("authToken",a),f.a.get("/api/project_settings/"+m).then((function(t){e.changeSettingsAuth(t.data.rows[0].change_settings_auth),e.editFilesAuth(t.data.rows[0].edit_files_auth)})).catch((function(e){console.log(e)}))})).catch((function(e){console.log(e)}))}),[]);var E=Object(C.a)((function(e){return{"@global":{"*::-webkit-scrollbar":{width:16,backgroundColor:e.palette.background.default},"*::-webkit-scrollbar-thumb":{backgroundColor:e.palette.secondary.main,width:6,border:"4px solid rgba(0, 0, 0, 0)",backgroundClip:"padding-box",borderRadius:10}},page:{marginLeft:o?250:0,height:"calc(100% - 52px)"},background:{position:"absolute",top:0,right:0,width:"100%",height:0===s?"calc(100% + 10px)":"100%"},title:{marginLeft:o?250:0,width:window.innerWidth-96,display:"flex",justifyContent:"center",alignItems:"center"},notification:{backgroundColor:e.palette.secondary.light,display:"flex",flexDirection:"row",alignItems:"center",padding:"0px 5px 0px 10px"}}}))();return r.a.createElement(oe.a,{square:!0,className:E.background},r.a.createElement("div",{style:{display:"flex",flexDirection:"row"}},r.a.createElement(Se,{onResize:function(){window.innerWidth<=1e3?i(!1):window.innerWidth>1e3&&i(!0)}}),r.a.createElement("div",{className:E.title},r.a.createElement(Sa,{changePage:function(e){u(e)}}))),r.a.createElement("div",{className:E.page},function(){switch(s){case 0:return r.a.createElement(ua,{project_id:m});case 1:return r.a.createElement(Ot,{project_id:m,setNotificationOpen:b});case 2:return r.a.createElement(wa,{project_id:m})}}()),r.a.createElement(ke.a,{className:E.snackbar,anchorOrigin:{vertical:"bottom",horizontal:"center"},open:h,autoHideDuration:3e3,onClose:function(){return b(!1)}},r.a.createElement(oe.a,{className:E.notification},r.a.createElement("div",{style:{fontSize:15,marginRight:15}},"New project invite!"),r.a.createElement(ee,{type:"icon",icon:"Close",onClick:function(){return b(!1)}}))))})),Ca=a(38),Na=function(e){var t=e.component,a=Object(u.a)(e,["component"]);return r.a.createElement(d.b,Object.assign({},a,{render:function(e){return localStorage.getItem("authToken")?r.a.createElement(t,e):r.a.createElement(d.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Ta=Object(g.b)((function(e){return{selectedTheme:e.selectedTheme}}),{selectTheme:h})((function(e){Object(n.useEffect)((function(){if("undefined"!==window.localStorage.getItem("authToken")&&window.localStorage.getItem("authToken")){var t=window.localStorage.getItem("authToken"),a=Ca.decode(JSON.parse(t));(function(){var t=Object(s.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.get("/api/user_settings/"+a.user_id).then((function(t){var a={name:t.data.rows[0].theme,id:function(){switch(t.data.rows[0].theme){case"redGreyTheme":return 0;case"darkModeTheme":return 1;case"orangeBlackTheme":return 2}}()};e.selectTheme(a)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}}),[]);return r.a.createElement(m.a,null,r.a.createElement("div",null,r.a.createElement(v.a,{theme:function(){switch(e.selectedTheme.name){case"redGreyTheme":return S;case"darkModeTheme":return k}}()},r.a.createElement(d.d,null,r.a.createElement(d.b,{exact:!0,path:"/",component:Te}),r.a.createElement(d.b,{path:"/login",component:ze}),r.a.createElement(d.b,{path:"/signup",component:Pe}),r.a.createElement(d.b,{path:"/settings",component:lt}),r.a.createElement(d.b,{path:"/support",component:dt}),r.a.createElement(Na,{path:"/projects",component:Ke}),r.a.createElement(Na,{path:"/:project_name/:project_id",component:_a})))))}));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ia=a(91),Da=Object(Ia.b)({selectedTheme:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{name:"redGreyTheme",id:0},t=arguments.length>1?arguments[1]:void 0;return"THEME_SELECTED"===t.type?t.payload:e},projectSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{changeSettingsAuth:9,editFilesAuth:9,projectFunctions:[]},t=arguments.length>1?arguments[1]:void 0;return"CHANGE_SETTINGS_AUTH"===t.type?Object(ue.a)({},e,{changeSettingsAuth:t.payload}):"EDIT_FILES_AUTH"===t.type?Object(ue.a)({},e,{editFilesAuth:t.payload}):e}}),La=Object(Ia.c)(Da,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());i.a.render(r.a.createElement(g.a,{store:La},r.a.createElement(Ta,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[297,1,2]]]);
//# sourceMappingURL=main.341c1a8e.chunk.js.map